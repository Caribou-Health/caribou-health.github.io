<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="description" content="Caribou - Personalized wellness platform transforming diagnoses into tailored, holistic health plans designed for your unique needs.">
  <title>Caribou - Personalized Care Plans</title>

  <!-- iOS Web App Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Caribou">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#4A9B9B">
  <meta name="format-detection" content="telephone=no">

  <!-- iOS Splash Screens -->
  <link rel="apple-touch-icon" href="assets/app-icon-180.png">
  <link rel="apple-touch-icon" sizes="152x152" href="assets/app-icon-152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/app-icon-180.png">
  <link rel="apple-touch-icon" sizes="167x167" href="assets/app-icon-167.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css?v=20260218d">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/logo.png">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <div id="app">
    <!-- Navigation -->
    <nav class="nav" role="navigation" aria-label="Main navigation" id="main-nav" style="display: none;">
      <div class="nav-container">
        <div class="nav-logo" onclick="navigateTo('home')" tabindex="0" role="button" aria-label="Caribou home">
          <img src="assets/logo.png" alt="Caribou" class="nav-logo-img">
          Caribou
        </div>

        <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12h18M3 6h18M3 18h18"/>
          </svg>
        </button>

        <ul class="nav-links" id="nav-links">
          <li><a href="#" onclick="navigateTo('home'); return false;" class="active" data-page="home">Dashboard</a></li>
          <li><a href="#" onclick="navigateTo('nutrition'); return false;" data-page="nutrition">Nutrition</a></li>
          <li><a href="#" onclick="navigateTo('medication'); return false;" data-page="medication">Medication</a></li>
          <li><a href="#" onclick="navigateTo('physicaltherapy'); return false;" data-page="physicaltherapy">Fitness</a></li>
          <li><a href="#" onclick="navigateTo('condition'); return false;" data-page="condition">My Condition</a></li>
          <li><a href="#" onclick="navigateTo('profile'); return false;" data-page="profile">Profile</a></li>
          <li><a href="#" onclick="navigateTo('tiers'); return false;" data-page="tiers">Plans</a></li>
          <li><a href="#" onclick="navigateTo('about'); return false;" data-page="about">About</a></li>
        </ul>
      </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content">

      <!-- Welcome/Landing Page (shown before intake) -->
      <div id="page-welcome" class="page active">
        <div class="welcome-hero">
          <div class="welcome-content">
            <!-- Caribou C with People Logo -->
            <div class="caribou-character-logo">
              <img src="assets/logo-transparent.png" alt="Caribou" class="caribou-logo-img">
            </div>
            <h1>Welcome to Caribou</h1>
            <p class="welcome-slogan">"Because we Caribou-t you"</p>
            <p class="welcome-subtitle">Your personalized care companion for better health outcomes.</p>
            <p class="welcome-description">
              Caribou transforms your diagnosis into an actionable, daily care plan - bridging the gap between clinical consultations and your everyday health management.
            </p>

            <!-- Auth Buttons -->
            <div class="welcome-auth-buttons">
              <button class="btn btn-primary btn-lg" onclick="showAuthModal('signup')">
                Create Account
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                  <circle cx="8.5" cy="7" r="4"/>
                  <path d="M20 8v6M23 11h-6"/>
                </svg>
              </button>
              <button class="btn btn-outline btn-lg" onclick="showAuthModal('login')">
                Sign In
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4M10 17l5-5-5-5M15 12H3"/>
                </svg>
              </button>
            </div>

            <p class="welcome-disclaimer">
              This platform supports your clinician's recommendations and does not provide medical advice.
            </p>
          </div>
          <div class="welcome-features">
            <div class="welcome-feature">
              <div class="welcome-feature-icon">
                <!-- Clipboard/Plan icon -->
                <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                  <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
                  <path d="M9 12h6"/>
                  <path d="M9 16h6"/>
                </svg>
              </div>
              <h3>Personalized Plans</h3>
              <p>Care plans tailored to your diagnosis and lifestyle</p>
            </div>
            <div class="welcome-feature">
              <div class="welcome-feature-icon">
                <!-- Calendar/Daily icon -->
                <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                  <path d="M8 14h.01"/>
                  <path d="M12 14h.01"/>
                  <path d="M16 14h.01"/>
                  <path d="M8 18h.01"/>
                  <path d="M12 18h.01"/>
                </svg>
              </div>
              <h3>Daily Guidance</h3>
              <p>Nutrition, medication, and exercise reminders</p>
            </div>
            <div class="welcome-feature">
              <div class="welcome-feature-icon">
                <!-- Cura Caribou for AI Support -->
                <svg width="36" height="36" viewBox="0 0 459 391" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M142.001 164.001V301.001C156.334 330.334 195.601 388.401 238.001 386.001C280.401 383.601 317.001 328.334 330.001 301.001H238.001M142.001 164.001C143.334 142.334 164.401 98.8009 238.001 98.0009C311.601 97.2009 330.001 141.668 330.001 164.001C363.144 164.001 387.097 153.442 404.001 137.339M142.001 164.001C109.301 164.001 85.3667 153.456 68.0844 137.339M238.001 301.001C228.668 292.668 210.601 274.401 213.001 268.001C216.001 260.001 263.001 257.001 261.001 268.001C259.401 276.801 245.001 293.668 238.001 301.001ZM436.001 4.00089C439.517 19.2356 440.972 39.2769 438.608 60.0009M28.0009 4.00089C25.4925 29.0852 27.5557 65.9675 41.2656 98.0009M41.2656 98.0009C60.1774 95.3342 98.6009 82.8009 101.001 54.0009M41.2656 98.0009C47.5399 112.661 56.2535 126.305 68.0844 137.339M404.001 137.339C420.001 136.559 452.601 140.801 455.001 164.001M404.001 137.339C425.32 117.028 435.425 87.896 438.608 60.0009M438.608 60.0009C412.739 57.0009 362.601 41.6009 369.001 4.00089M68.0844 137.339C50.7233 149.559 13.6009 169.201 4.00089 150.001M254.001 194.001C255.668 190.001 262.601 182.001 277.001 182.001C291.401 182.001 298.334 190.001 300.001 194.001" stroke="var(--primary-500)" stroke-width="10" stroke-linecap="round"/>
                </svg>
              </div>
              <h3>Cura AI Support</h3>
              <p>Get answers and update your plan anytime</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Auth Modal -->
      <div id="auth-modal" class="auth-modal" style="display: none;">
        <div class="auth-modal-overlay" onclick="closeAuthModal()"></div>
        <div class="auth-modal-content">
          <button class="auth-modal-close" onclick="closeAuthModal()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
          </button>

          <div class="auth-modal-header">
            <img src="assets/logo-transparent.png" alt="Caribou" class="auth-logo">
            <h2 id="auth-modal-title">Create Account</h2>
            <p id="auth-modal-subtitle">Join Caribou to start your personalized care journey</p>
          </div>

          <!-- Sign Up Form -->
          <form id="signup-form" class="auth-form" onsubmit="handleSignup(event)">
            <div class="form-group">
              <label for="signup-email" class="form-label">Email Address</label>
              <input type="email" id="signup-email" class="form-input" placeholder="you@example.com" required>
            </div>
            <div class="form-group">
              <label for="signup-password" class="form-label">Password</label>
              <input type="password" id="signup-password" class="form-input" placeholder="Create a password" minlength="6" required>
              <p class="form-hint">At least 6 characters</p>
            </div>
            <div class="form-group">
              <label for="signup-confirm" class="form-label">Confirm Password</label>
              <input type="password" id="signup-confirm" class="form-input" placeholder="Confirm your password" required>
            </div>
            <div class="form-group" style="margin-top: var(--space-2);">
              <label class="checkbox-label" style="display: flex; align-items: flex-start; gap: var(--space-2); cursor: pointer; font-size: 0.85rem; line-height: 1.4; color: var(--gray-600);">
                <input type="checkbox" id="signup-terms" required style="margin-top: 3px; flex-shrink: 0;">
                <span>I agree to the <a href="/terms.html" target="_blank" style="color: var(--primary); text-decoration: underline;">Terms of Service</a> and <a href="/privacy.html" target="_blank" style="color: var(--primary); text-decoration: underline;">Privacy Policy</a>. I understand that Caribou provides holistic wellness plans to complement, not replace, professional medical care.</span>
              </label>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">
              Create Account & Continue
            </button>
            <p class="auth-switch">
              Already have an account? <a href="#" onclick="switchAuthMode('login'); return false;">Sign In</a>
            </p>
          </form>

          <!-- Login Form -->
          <form id="login-form" class="auth-form" style="display: none;" onsubmit="handleLogin(event)">
            <div class="form-group">
              <label for="login-email" class="form-label">Email Address</label>
              <input type="email" id="login-email" class="form-input" placeholder="you@example.com" required>
            </div>
            <div class="form-group">
              <label for="login-password" class="form-label">Password</label>
              <input type="password" id="login-password" class="form-input" placeholder="Your password" required>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">
              Sign In
            </button>
            <p class="auth-forgot-password">
              <a href="#" onclick="showForgotPasswordModal(); return false;">Forgot your password?</a>
            </p>
            <p class="auth-switch">
              Don't have an account? <a href="#" onclick="switchAuthMode('signup'); return false;">Create Account</a>
            </p>
          </form>

          <div class="auth-divider">
            <span>or</span>
          </div>

          <button class="btn btn-outline google-signin-btn" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: var(--space-2);" onclick="handleGoogleSignIn()">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"/>
              <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
              <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
              <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
            </svg>
            Continue with Google
          </button>
          <p class="auth-guest-note" style="color: var(--gray-500); font-size: 0.8rem; margin-top: var(--space-2);">Sign in securely with your Google account</p>
        </div>
      </div>

      <!-- Family Profile Modal -->
      <div id="family-profile-modal" class="auth-modal" style="display: none;">
        <div class="auth-modal-overlay" onclick="closeFamilyProfileModal()"></div>
        <div class="auth-modal-content">
          <button class="auth-modal-close" onclick="closeFamilyProfileModal()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
          </button>

          <div class="auth-modal-header">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="1.5" style="margin-bottom: var(--space-3);">
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
              <circle cx="8.5" cy="7" r="4"/>
              <line x1="20" y1="8" x2="20" y2="14"/>
              <line x1="23" y1="11" x2="17" y2="11"/>
            </svg>
            <h2 id="family-modal-title">Add Family Member</h2>
            <p id="family-modal-subtitle">Create a care plan for your loved one</p>
          </div>

          <form id="family-profile-form" class="auth-form" onsubmit="saveFamilyProfile(event)">
            <input type="hidden" id="family-profile-id" value="">

            <div class="form-group">
              <label for="family-member-name" class="form-label">Name <span style="color: var(--error);">*</span></label>
              <input type="text" id="family-member-name" class="form-input" placeholder="e.g., Mom, Dad, Grandma" required>
            </div>

            <div class="form-group">
              <label for="family-member-relationship" class="form-label">Relationship</label>
              <select id="family-member-relationship" class="form-input">
                <option value="parent">Parent</option>
                <option value="spouse">Spouse/Partner</option>
                <option value="child">Child</option>
                <option value="sibling">Sibling</option>
                <option value="grandparent">Grandparent</option>
                <option value="other">Other Family Member</option>
              </select>
            </div>

            <div class="form-group">
              <label for="family-member-age" class="form-label">Age</label>
              <input type="number" id="family-member-age" class="form-input" placeholder="Age" min="1" max="120">
            </div>

            <div class="form-group">
              <label for="family-member-condition" class="form-label">Primary Condition <span style="color: var(--error);">*</span></label>
              <select id="family-member-condition" class="form-input" required>
                <!-- Will be populated dynamically with conditions -->
              </select>
            </div>

            <div class="form-group">
              <label for="family-member-notes" class="form-label">Additional Notes</label>
              <textarea id="family-member-notes" class="form-input" rows="3" placeholder="Any special considerations or notes about their care needs"></textarea>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                <polyline points="17,21 17,13 7,13 7,21"/>
                <polyline points="7,3 7,8 15,8"/>
              </svg>
              Save Family Member
            </button>
          </form>
        </div>
      </div>

      <!-- Document Upload Modal -->
      <div id="document-upload-modal" class="auth-modal" style="display: none;">
        <div class="auth-modal-overlay" onclick="closeUploadDocumentModal()"></div>
        <div class="auth-modal-content">
          <button class="auth-modal-close" onclick="closeUploadDocumentModal()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
          </button>

          <div class="auth-modal-header">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="1.5" style="margin-bottom: var(--space-3);">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17,8 12,3 7,8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            <h2>Upload Document</h2>
            <p>Add a document to your health records</p>
          </div>

          <form id="document-upload-form" class="auth-form" onsubmit="uploadProfileDocument(event)">
            <div class="form-group">
              <label for="document-name" class="form-label">Document Name <span style="color: var(--error);">*</span></label>
              <input type="text" id="document-name" class="form-input" placeholder="e.g., MRI Results, PT Instructions" required>
            </div>

            <div class="form-group">
              <label for="document-type" class="form-label">Document Type</label>
              <select id="document-type" class="form-input">
                <option value="medical-record">Medical Record</option>
                <option value="pt-instructions">PT Instructions</option>
                <option value="imaging">Imaging (X-ray, MRI, etc.)</option>
                <option value="lab-results">Lab Results</option>
                <option value="prescription">Prescription</option>
                <option value="insurance">Insurance Document</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">File <span style="color: var(--error);">*</span></label>
              <div class="document-upload-area" onclick="document.getElementById('profile-document-file').click()">
                <input type="file" id="profile-document-file" accept="image/*,.pdf,.doc,.docx" style="display: none;" onchange="previewDocumentFile(this)" required>
                <div id="document-file-preview" class="document-file-preview">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--gray-400)" stroke-width="1.5">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="17,8 12,3 7,8"/>
                    <line x1="12" y1="3" x2="12" y2="15"/>
                  </svg>
                  <p style="color: var(--gray-500); margin-top: var(--space-2);">Click to select a file</p>
                  <p style="color: var(--gray-400); font-size: 0.75rem;">PDF, images, or documents</p>
                </div>
              </div>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">
              Upload Document
            </button>
          </form>
        </div>
      </div>

      <!-- Intake Form Page -->
      <div id="page-intake" class="page">
        <div class="container-md">
          <div class="card">
            <div class="card-header text-center">
              <img src="assets/logo.png" alt="Caribou" class="intake-logo">
              <h1>Let's Build Your Care Plan</h1>
              <p style="color: var(--gray-600); margin-top: var(--space-2);">Tell us about yourself so we can create your personalized care plan.</p>
            </div>

            <!-- Progress Steps - Redesigned -->
            <div class="progress-steps-container" id="intake-progress">
              <div class="progress-step active" data-step="1">
                <span class="progress-step-label">Diagnosis</span>
              </div>
              <div class="progress-arrow">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"/>
                </svg>
              </div>
              <div class="progress-step" data-step="2">
                <span class="progress-step-label">Health</span>
              </div>
              <div class="progress-arrow">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"/>
                </svg>
              </div>
              <div class="progress-step" data-step="3">
                <span class="progress-step-label">Exercise</span>
              </div>
              <div class="progress-arrow">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"/>
                </svg>
              </div>
              <div class="progress-step" data-step="4">
                <span class="progress-step-label">Nutrition</span>
              </div>
              <div class="progress-arrow">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"/>
                </svg>
              </div>
              <div class="progress-step" data-step="5">
                <span class="progress-step-label">Medical</span>
              </div>
            </div>

            <form id="intake-form" onsubmit="submitIntakeForm(event)" novalidate>
              <!-- Step 1: Diagnosis -->
              <div class="intake-step active" data-step="1">
                <h2 style="margin-bottom: var(--space-6);">Your Diagnosis</h2>

                <div class="form-group">
                  <label for="user-first-name" class="form-label">What should we call you? <span style="color: var(--error);">*</span></label>
                  <input type="text" id="user-first-name" class="form-input" placeholder="e.g., Cal" required>
                  <p class="form-hint">We'll use this to personalize your care plan.</p>
                </div>

                <div class="form-group">
                  <label for="diagnosis-input" class="form-label">What is your diagnosis or health goal? <span style="color: var(--error);">*</span></label>
                  <div class="diagnosis-autocomplete-wrapper">
                    <input type="text" id="diagnosis-input" class="form-input" placeholder="Start typing... e.g., back pain, weight loss, diabetes" autocomplete="off" required>
                    <input type="hidden" id="diagnosis" name="diagnosis" value="">
                    <div id="diagnosis-dropdown" class="diagnosis-dropdown" style="display: none;"></div>
                  </div>
                  <p class="form-hint" id="diagnosis-hint">Type to search conditions, or enter your own if not listed.</p>
                  <div id="selected-diagnosis-badge" class="selected-diagnosis-badge" style="display: none;"></div>
                </div>

                <div class="form-group">
                  <label for="diagnosis-date" class="form-label">Date of diagnosis <span style="color: var(--error);">*</span></label>
                  <input type="date" id="diagnosis-date" class="form-input" required>
                </div>

                <div class="form-group">
                  <label for="other-conditions" class="form-label">Secondary diagnoses & other conditions <span class="form-label-optional">(optional)</span></label>
                  <textarea id="other-conditions" class="form-textarea" rows="3" placeholder="Enter any additional health conditions, separated by commas (e.g., Type 2 Diabetes, Hypertension, Anxiety, Sleep Apnea...)"></textarea>
                  <div id="other-conditions-validation" class="form-validation-message" style="display: none;"></div>
                  <p class="form-hint" style="font-size: 0.75rem; color: var(--gray-500); margin-top: var(--space-1);">
                    Add all secondary diagnoses or existing conditions. Your care plan will be customized to address all conditions together. Common examples: diabetes, hypertension, arthritis, COPD, fibromyalgia, anxiety, depression, thyroid conditions.
                  </p>
                </div>

                <!-- Body Metrics Section - Always shown, required for calorie calculations -->
                <div class="weight-management-section" id="weight-management-fields" style="display: block;">
                  <div class="info-banner" style="background: var(--primary-light); padding: var(--space-4); border-radius: var(--radius-lg); margin-bottom: var(--space-4);">
                    <p style="color: var(--primary-dark); margin: 0;">
                      <strong>Your Body Metrics</strong><br>
                      This information helps us calculate your daily calorie needs and personalize your nutrition plan.
                    </p>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label for="wm-age" class="form-label">Age <span style="color: var(--error);">*</span></label>
                      <input type="number" id="wm-age" class="form-input wm-required" min="18" max="120" placeholder="e.g., 35">
                    </div>
                    <div class="form-group">
                      <label for="wm-sex" class="form-label">Biological sex <span style="color: var(--error);">*</span></label>
                      <select id="wm-sex" class="form-select wm-required">
                        <option value="">Select</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                      </select>
                    </div>
                  </div>

                  <!-- Unit Toggle for Weight Management -->
                  <div class="form-group">
                    <label class="form-label">Preferred units</label>
                    <div class="unit-toggle" id="wm-unit-toggle">
                      <button type="button" class="unit-option selected" data-unit="metric" onclick="toggleWMUnits('metric')">Metric (kg, cm)</button>
                      <button type="button" class="unit-option" data-unit="imperial" onclick="toggleWMUnits('imperial')">Imperial (lbs, ft/in)</button>
                    </div>
                  </div>

                  <!-- Metric inputs -->
                  <div class="form-row" id="wm-metric-inputs">
                    <div class="form-group">
                      <label for="wm-height" class="form-label">Height (cm) <span style="color: var(--error);">*</span></label>
                      <input type="number" id="wm-height" class="form-input wm-required wm-metric" min="100" max="250" placeholder="e.g., 170">
                    </div>
                    <div class="form-group">
                      <label for="wm-weight" class="form-label">Weight (kg) <span style="color: var(--error);">*</span></label>
                      <input type="number" id="wm-weight" class="form-input wm-required wm-metric" min="30" max="300" placeholder="e.g., 70">
                    </div>
                  </div>

                  <!-- Imperial inputs (hidden by default) -->
                  <div class="form-row" id="wm-imperial-inputs" style="display: none;">
                    <div class="form-group">
                      <label class="form-label">Height <span style="color: var(--error);">*</span></label>
                      <div class="height-imperial-inputs">
                        <input type="number" id="wm-height-ft" class="form-input form-input-sm wm-required wm-imperial" min="3" max="8" placeholder="ft" style="display: none;">
                        <span>ft</span>
                        <input type="number" id="wm-height-in" class="form-input form-input-sm wm-required wm-imperial" min="0" max="11" placeholder="in" style="display: none;">
                        <span>in</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="wm-weight-lbs" class="form-label">Weight (lbs) <span style="color: var(--error);">*</span></label>
                      <input type="number" id="wm-weight-lbs" class="form-input wm-required wm-imperial" min="60" max="700" placeholder="e.g., 154" style="display: none;">
                    </div>
                  </div>

                  <!-- Weight goal - only shown for weight management conditions -->
                  <div class="form-group" id="wm-goal-group" style="display: none;">
                    <label for="wm-goal" class="form-label">What is your goal? <span style="color: var(--error);">*</span></label>
                    <select id="wm-goal" class="form-select wm-goal-required">
                      <option value="">Select your goal</option>
                      <option value="lose-10">Lose 10 lbs or less</option>
                      <option value="lose-25">Lose 10-25 lbs</option>
                      <option value="lose-50">Lose 25-50 lbs</option>
                      <option value="lose-50plus">Lose 50+ lbs</option>
                      <option value="gain-muscle">Build muscle / Gain weight</option>
                      <option value="maintain">Maintain current weight</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Step 2: Health Behaviors -->
              <div class="intake-step" data-step="2">
                <h2 style="margin-bottom: var(--space-6);">Health Behaviors</h2>
                <p style="color: var(--gray-600); margin-bottom: var(--space-6);">Select any that apply to you. This helps us personalize your plan.</p>

                <div class="form-group">
                  <label class="form-label">Current health behaviors</label>
                  <div class="icon-select-grid large-icons" id="health-behaviors">
                    <div class="icon-select-item" data-behavior="smoking" data-category="wellness" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M18 12H2v4h16zM22 12v4M22 6c0 2-2 4-4 4M18 6V2c2 0 4 2 4 4"/>
                        </svg>
                      </div>
                      <span>Smoking/Vaping</span>
                    </div>
                    <div class="icon-select-item" data-behavior="alcohol" data-category="wellness" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M8 22h8M12 11v11M5.7 2h12.6L17 11c0 3-2 5-5 5s-5-2-5-5z"/>
                        </svg>
                      </div>
                      <span>Alcohol Use</span>
                    </div>
                    <div class="icon-select-item" data-behavior="sleep-issues" data-category="sleep" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                        </svg>
                      </div>
                      <span>Sleep Issues</span>
                    </div>
                    <div class="icon-select-item" data-behavior="substance" data-category="pain" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
                          <path d="M12 9v4"/>
                          <circle cx="12" cy="17" r="1" fill="currentColor"/>
                        </svg>
                      </div>
                      <span>Substance Use</span>
                    </div>
                    <div class="icon-select-item" data-behavior="stress" data-category="mood" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <circle cx="12" cy="12" r="10"/>
                          <path d="M16 16s-1.5-2-4-2-4 2-4 2"/>
                          <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                          <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                        </svg>
                      </div>
                      <span>High Stress</span>
                    </div>
                    <div class="icon-select-item" data-behavior="sedentary" data-category="activity" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <rect x="2" y="6" width="20" height="12" rx="2"/>
                          <circle cx="12" cy="12" r="1.5" fill="currentColor"/>
                        </svg>
                      </div>
                      <span>Sedentary Lifestyle</span>
                    </div>
                  </div>
                </div>

                <!-- Sleep Quality with Visual Cards -->
                <div class="tracker-section">
                  <div class="tracker-section-header">
                    <div class="tracker-section-icon sleep">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                      </svg>
                    </div>
                    <h3>Sleep Quality <span style="color: var(--error); font-weight: normal;">*</span></h3>
                  </div>
                  <div class="icon-select-grid" id="sleep-quality">
                    <div class="icon-select-item" data-value="poor" data-category="sleep" onclick="selectRating('sleep-quality', 'poor')">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <circle cx="12" cy="12" r="10"/>
                          <path d="M16 16s-1.5-2-4-2-4 2-4 2"/>
                          <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                          <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                        </svg>
                      </div>
                      <span>Poor</span>
                    </div>
                    <div class="icon-select-item" data-value="good" data-category="sleep" onclick="selectRating('sleep-quality', 'good')">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <circle cx="12" cy="12" r="10"/>
                          <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                          <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                          <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                        </svg>
                      </div>
                      <span>Good</span>
                    </div>
                    <div class="icon-select-item" data-value="excellent" data-category="sleep" onclick="selectRating('sleep-quality', 'excellent')">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <circle cx="12" cy="12" r="10"/>
                          <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                          <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                          <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                          <path d="M12 2v2M2 12h2M22 12h-2"/>
                        </svg>
                      </div>
                      <span>Excellent</span>
                    </div>
                  </div>
                </div>

                <!-- Chronotype with Visual Cards -->
                <div class="tracker-section">
                  <div class="tracker-section-header">
                    <div class="tracker-section-icon mood">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                      </svg>
                    </div>
                    <h3>Are you a morning or night person? <span style="color: var(--error); font-weight: normal;">*</span></h3>
                  </div>
                  <div class="icon-select-grid" id="chronotype">
                    <div class="icon-select-item" data-value="morning" data-category="mood" onclick="selectRating('chronotype', 'morning')">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <circle cx="12" cy="12" r="5"/>
                          <line x1="12" y1="1" x2="12" y2="3"/>
                          <line x1="12" y1="21" x2="12" y2="23"/>
                          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                          <line x1="1" y1="12" x2="3" y2="12"/>
                          <line x1="21" y1="12" x2="23" y2="12"/>
                        </svg>
                      </div>
                      <span>Morning Person</span>
                    </div>
                    <div class="icon-select-item" data-value="night" data-category="sleep" onclick="selectRating('chronotype', 'night')">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                        </svg>
                      </div>
                      <span>Night Owl</span>
                    </div>
                  </div>
                </div>

                <!-- Extended Questions Toggle -->
                <div class="extended-toggle" id="extended-health-toggle">
                  <button type="button" class="btn btn-ghost" onclick="toggleExtendedQuestions('health')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 5v14M5 12h14"/>
                    </svg>
                    Want a more personalized plan? Answer more questions
                  </button>
                </div>

                <!-- Extended Health Questions -->
                <div class="extended-questions" id="extended-health" style="display: none;">
                  <div class="form-group">
                    <label for="avg-sleep" class="form-label">Average hours of sleep per night</label>
                    <input type="number" id="avg-sleep" class="form-input" min="1" max="16" placeholder="e.g., 7">
                  </div>

                  <div class="form-group">
                    <label for="bedtime" class="form-label">What is your usual bedtime?</label>
                    <input type="time" id="bedtime" class="form-input">
                  </div>

                  <div class="form-group">
                    <label for="wake-time" class="form-label">What time do you usually wake up?</label>
                    <input type="time" id="wake-time" class="form-input">
                  </div>

                  <div class="form-group">
                    <label for="stress-level" class="form-label">On a typical day, how would you rate your stress level?</label>
                    <div class="rating-scale" id="stress-level">
                      <div class="rating-item" data-value="1" onclick="selectRating('stress-level', '1')">1</div>
                      <div class="rating-item" data-value="2" onclick="selectRating('stress-level', '2')">2</div>
                      <div class="rating-item" data-value="3" onclick="selectRating('stress-level', '3')">3</div>
                      <div class="rating-item" data-value="4" onclick="selectRating('stress-level', '4')">4</div>
                      <div class="rating-item" data-value="5" onclick="selectRating('stress-level', '5')">5</div>
                    </div>
                    <p class="form-hint">1 = Very low, 5 = Very high</p>
                  </div>
                </div>
              </div>

              <!-- Step 3: Exercise & Physical Activity -->
              <div class="intake-step" data-step="3">
                <h2 style="margin-bottom: var(--space-6);">Exercise & Activity</h2>

                <div class="form-group">
                  <label class="form-label">Do you have a workout schedule? <span style="color: var(--error);">*</span></label>
                  <div id="workout-schedule-options">
                    <label class="form-check" style="margin-bottom: var(--space-3);">
                      <input type="radio" name="has-workout-schedule" value="yes" required onchange="toggleWorkoutSchedule(true)">
                      <span>Yes, I have a schedule</span>
                    </label>
                    <label class="form-check">
                      <input type="radio" name="has-workout-schedule" value="no" required onchange="toggleWorkoutSchedule(false)">
                      <span>I do not currently work out</span>
                    </label>
                  </div>
                </div>

                <div class="form-group" id="workout-schedule-details" style="display: none;">
                  <label for="workout-schedule" class="form-label">Describe your workout schedule</label>
                  <textarea id="workout-schedule" class="form-textarea" placeholder="e.g., Monday: Upper body, Wednesday: Cardio, Friday: Lower body"></textarea>
                </div>

                <div class="form-group">
                  <label class="form-label">Where do you prefer to exercise?</label>
                  <div class="rating-scale" id="workout-location">
                    <div class="rating-item" data-value="home" onclick="selectRating('workout-location', 'home')">At Home</div>
                    <div class="rating-item" data-value="gym" onclick="selectRating('workout-location', 'gym')">At Gym</div>
                    <div class="rating-item" data-value="outdoors" onclick="selectRating('workout-location', 'outdoors')">Outdoors</div>
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">Do you have access to exercise equipment?</label>
                  <div class="rating-scale" id="equipment-access">
                    <div class="rating-item" data-value="none" onclick="selectRating('equipment-access', 'none')">None</div>
                    <div class="rating-item" data-value="basic" onclick="selectRating('equipment-access', 'basic')">Basic</div>
                    <div class="rating-item" data-value="full" onclick="selectRating('equipment-access', 'full')">Full Gym</div>
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">What intensity level do you prefer?</label>
                  <div class="rating-scale" id="intensity-preference">
                    <div class="rating-item" data-value="low" onclick="selectRating('intensity-preference', 'low')">Low</div>
                    <div class="rating-item" data-value="medium" onclick="selectRating('intensity-preference', 'medium')">Medium</div>
                    <div class="rating-item" data-value="high" onclick="selectRating('intensity-preference', 'high')">High</div>
                  </div>
                </div>

                <!-- Extended Questions Toggle -->
                <div class="extended-toggle">
                  <button type="button" class="btn btn-ghost" onclick="toggleExtendedQuestions('exercise')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 5v14M5 12h14"/>
                    </svg>
                    Want a more personalized plan? Answer more questions
                  </button>
                </div>

                <!-- Extended Exercise Questions -->
                <div class="extended-questions" id="extended-exercise" style="display: none;">
                  <div class="form-group">
                    <label for="exercise-frequency" class="form-label">How often do you currently exercise?</label>
                    <select id="exercise-frequency" class="form-select">
                      <option value="">Select frequency</option>
                      <option value="never">I don't currently exercise</option>
                      <option value="rarely">Rarely (1-2 times per month)</option>
                      <option value="sometimes">Sometimes (1-2 times per week)</option>
                      <option value="regularly">Regularly (3-4 times per week)</option>
                      <option value="daily">Daily</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="preferred-exercise-time" class="form-label">What time of day do you prefer to exercise?</label>
                    <select id="preferred-exercise-time" class="form-select">
                      <option value="">Select time</option>
                      <option value="early-morning">Early morning (5-7 AM)</option>
                      <option value="morning">Morning (7-10 AM)</option>
                      <option value="midday">Midday (11 AM - 1 PM)</option>
                      <option value="afternoon">Afternoon (2-5 PM)</option>
                      <option value="evening">Evening (5-8 PM)</option>
                      <option value="night">Night (8-10 PM)</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="exercise-duration" class="form-label">How long do you prefer your exercise sessions?</label>
                    <select id="exercise-duration" class="form-select">
                      <option value="">Select duration</option>
                      <option value="15">15 minutes</option>
                      <option value="30">30 minutes</option>
                      <option value="45">45 minutes</option>
                      <option value="60">60 minutes</option>
                      <option value="90">90+ minutes</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="mobility-limitations" class="form-label">Do you have any mobility limitations?</label>
                    <textarea id="mobility-limitations" class="form-textarea" placeholder="Describe any limitations that affect your ability to exercise..."></textarea>
                  </div>
                </div>
              </div>

              <!-- Step 4: Nutrition -->
              <div class="intake-step" data-step="4">
                <h2 style="margin-bottom: var(--space-6);">Nutrition & Diet</h2>

                <div class="tracker-section">
                  <div class="tracker-section-header">
                    <div class="tracker-section-icon wellness">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 20A7 7 0 019.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10z"/>
                      </svg>
                    </div>
                    <h3>Dietary Restrictions <span style="font-weight: normal; color: var(--gray-500);">(select all that apply)</span></h3>
                  </div>
                  <div class="icon-select-grid large-icons" id="dietary-restrictions">
                    <div class="icon-select-item" data-restriction="vegetarian" data-category="wellness" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 20A7 7 0 019.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10z"/>
                          <path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/>
                        </svg>
                      </div>
                      <span>Vegetarian</span>
                    </div>
                    <div class="icon-select-item" data-restriction="vegan" data-category="wellness" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 20A7 7 0 019.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10z"/>
                        </svg>
                      </div>
                      <span>Vegan</span>
                    </div>
                    <div class="icon-select-item" data-restriction="gluten-free" data-category="pain" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <circle cx="12" cy="12" r="10"/>
                          <path d="M4.93 4.93l14.14 14.14"/>
                        </svg>
                      </div>
                      <span>Gluten-Free</span>
                    </div>
                    <div class="icon-select-item" data-restriction="dairy-free" data-category="sleep" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M8 2h8l1 5H7zM7 7v10a5 5 0 0010 0V7"/>
                        </svg>
                      </div>
                      <span>Dairy-Free</span>
                    </div>
                    <div class="icon-select-item" data-restriction="nut-allergy" data-category="pain" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <ellipse cx="12" cy="12" rx="8" ry="10"/>
                          <path d="M12 2v20"/>
                        </svg>
                      </div>
                      <span>Nut Allergy</span>
                    </div>
                    <div class="icon-select-item" data-restriction="low-sodium" data-category="activity" onclick="toggleBehavior(this)">
                      <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <rect x="4" y="8" width="16" height="12" rx="2"/>
                          <path d="M12 2v6"/>
                        </svg>
                      </div>
                      <span>Low Sodium</span>
                    </div>
                  </div>
                </div>

                <!-- Extended Questions Toggle -->
                <div class="extended-toggle">
                  <button type="button" class="btn btn-ghost" onclick="toggleExtendedQuestions('nutrition')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 5v14M5 12h14"/>
                    </svg>
                    Want a more personalized plan? Answer more questions
                  </button>
                </div>

                <!-- Extended Nutrition Questions (for calorie calculation) -->
                <div class="extended-questions" id="extended-nutrition" style="display: none;">
                  <p style="color: var(--gray-600); margin-bottom: var(--space-4);">This information helps us calculate your daily nutritional needs and create personalized meal suggestions.</p>

                  <!-- Message shown when data was already entered in Weight Management section -->
                  <div class="info-banner wm-data-notice" id="wm-data-prefilled-notice" style="display: none; background: var(--primary-light); padding: var(--space-3); border-radius: var(--radius); margin-bottom: var(--space-4); border-left: 3px solid var(--primary-500);">
                    <p style="color: var(--primary-dark); margin: 0; font-size: 0.9rem;">
                      <strong> Body metrics already entered</strong><br>
                      <span style="font-size: 0.85rem;">We've pre-filled your age, sex, height, and weight from your Weight Management profile.</span>
                    </p>
                  </div>

                  <div class="form-row" id="nutrition-age-sex-row">
                    <div class="form-group">
                      <label for="user-age" class="form-label">Age</label>
                      <input type="number" id="user-age" class="form-input" min="18" max="120" placeholder="e.g., 35">
                    </div>
                    <div class="form-group">
                      <label for="user-sex" class="form-label">Biological sex</label>
                      <select id="user-sex" class="form-select">
                        <option value="">Select</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                      </select>
                    </div>
                  </div>

                  <!-- Unit Toggle -->
                  <div class="form-group">
                    <label class="form-label">Preferred units</label>
                    <div class="unit-toggle" id="unit-toggle">
                      <button type="button" class="unit-option selected" data-unit="metric" onclick="toggleUnits('metric')">Metric (kg, cm)</button>
                      <button type="button" class="unit-option" data-unit="imperial" onclick="toggleUnits('imperial')">Imperial (lbs, ft/in)</button>
                    </div>
                  </div>

                  <!-- Metric inputs -->
                  <div class="form-row" id="metric-inputs">
                    <div class="form-group">
                      <label for="user-height" class="form-label">Height (cm)</label>
                      <input type="number" id="user-height" class="form-input" min="100" max="250" placeholder="e.g., 170">
                    </div>
                    <div class="form-group">
                      <label for="user-weight" class="form-label">Weight (kg)</label>
                      <input type="number" id="user-weight" class="form-input" min="30" max="300" placeholder="e.g., 70">
                    </div>
                  </div>

                  <!-- Imperial inputs (hidden by default) -->
                  <div class="form-row" id="imperial-inputs" style="display: none;">
                    <div class="form-group">
                      <label class="form-label">Height</label>
                      <div class="height-imperial-inputs">
                        <input type="number" id="user-height-ft" class="form-input form-input-sm" min="3" max="8" placeholder="ft">
                        <span>ft</span>
                        <input type="number" id="user-height-in" class="form-input form-input-sm" min="0" max="11" placeholder="in">
                        <span>in</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="user-weight-lbs" class="form-label">Weight (lbs)</label>
                      <input type="number" id="user-weight-lbs" class="form-input" min="60" max="700" placeholder="e.g., 154">
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="activity-level" class="form-label">Activity level</label>
                    <select id="activity-level" class="form-select">
                      <option value="">Select activity level</option>
                      <option value="sedentary">Sedentary (little or no exercise)</option>
                      <option value="light">Lightly active (1-3 days/week)</option>
                      <option value="moderate">Moderately active (3-5 days/week)</option>
                      <option value="active">Very active (6-7 days/week)</option>
                      <option value="extra-active">Extra active (very hard exercise)</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="dietary-habits" class="form-label">Describe your typical dietary habits</label>
                    <textarea id="dietary-habits" class="form-textarea" placeholder="e.g., I eat 3 meals a day, mostly home-cooked. I tend to snack in the evenings..."></textarea>
                  </div>

                  <div class="form-group">
                    <label for="grocery-budget" class="form-label">Weekly grocery budget</label>
                    <select id="grocery-budget" class="form-select">
                      <option value="">Select your budget range</option>
                      <option value="low">Budget-conscious ($50-75/week)</option>
                      <option value="moderate">Moderate ($75-125/week)</option>
                      <option value="comfortable">Comfortable ($125-175/week)</option>
                      <option value="flexible">Flexible ($175+/week)</option>
                    </select>
                    <p class="form-hint">This helps us suggest meals that fit your budget. Lower budgets will include more pantry staples and batch-cooking recipes.</p>
                  </div>

                  <div class="form-group">
                    <label for="meal-times" class="form-label">What are your typical meal times?</label>
                    <div class="meal-time-inputs">
                      <div class="meal-time-row">
                        <span>Breakfast:</span>
                        <input type="time" id="breakfast-time" class="form-input form-input-sm" value="08:00">
                      </div>
                      <div class="meal-time-row">
                        <span>Lunch:</span>
                        <input type="time" id="lunch-time" class="form-input form-input-sm" value="12:30">
                      </div>
                      <div class="meal-time-row">
                        <span>Dinner:</span>
                        <input type="time" id="dinner-time" class="form-input form-input-sm" value="18:30">
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="other-restrictions" class="form-label">Other dietary notes</label>
                    <textarea id="other-restrictions" class="form-textarea" placeholder="Any other dietary considerations, allergies, or preferences..."></textarea>
                  </div>

                  <div class="form-group" id="pantry-ingredients-group" style="display: none;">
                    <label class="form-label">Pantry staples you have on hand</label>
                    <p class="form-hint" style="margin-bottom: var(--space-3);">Select items you typically keep stocked. We'll suggest recipes that use these ingredients first.</p>
                    <div class="pantry-grid">
                      <label class="pantry-item"><input type="checkbox" value="rice"> Rice</label>
                      <label class="pantry-item"><input type="checkbox" value="pasta"> Pasta</label>
                      <label class="pantry-item"><input type="checkbox" value="oats"> Oats</label>
                      <label class="pantry-item"><input type="checkbox" value="flour"> Flour</label>
                      <label class="pantry-item"><input type="checkbox" value="canned-beans"> Canned Beans</label>
                      <label class="pantry-item"><input type="checkbox" value="canned-tomatoes"> Canned Tomatoes</label>
                      <label class="pantry-item"><input type="checkbox" value="lentils"> Lentils</label>
                      <label class="pantry-item"><input type="checkbox" value="chickpeas"> Chickpeas</label>
                      <label class="pantry-item"><input type="checkbox" value="eggs"> Eggs</label>
                      <label class="pantry-item"><input type="checkbox" value="onions"> Onions</label>
                      <label class="pantry-item"><input type="checkbox" value="garlic"> Garlic</label>
                      <label class="pantry-item"><input type="checkbox" value="potatoes"> Potatoes</label>
                      <label class="pantry-item"><input type="checkbox" value="olive-oil"> Olive Oil</label>
                      <label class="pantry-item"><input type="checkbox" value="soy-sauce"> Soy Sauce</label>
                      <label class="pantry-item"><input type="checkbox" value="spices"> Basic Spices</label>
                      <label class="pantry-item"><input type="checkbox" value="frozen-veg"> Frozen Vegetables</label>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Step 5: Medical Info -->
              <div class="intake-step" data-step="5">
                <h2 style="margin-bottom: var(--space-6);">Medical Information</h2>

                <div class="safety-banner safety-banner-warning">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
                    <path d="M12 9v4M12 17h.01"/>
                  </svg>
                  <p><strong>Privacy Notice:</strong> Your medical information is kept strictly confidential and is only used to personalize your care plan. We do not share this information with third parties.</p>
                </div>

                <div class="form-group">
                  <label for="medications" class="form-label">Current medications or prescriptions <span class="form-label-optional">(optional)</span></label>
                  <textarea id="medications" class="form-textarea" placeholder="List any medications you're currently taking (one per line)...&#10;e.g., Metformin&#10;Lisinopril&#10;Ibuprofen" oninput="validateMedications(this)"></textarea>
                  <p class="form-hint">This helps us create medication reminders. Always follow your prescriber's instructions.</p>
                  <div id="medication-validation" class="medication-validation" style="display: none;"></div>
                </div>

                <div class="form-group">
                  <label for="doctor-input" class="form-label">Doctor's recommendations or follow-up care suggestions <span class="form-label-optional">(optional)</span></label>
                  <textarea id="doctor-input" class="form-textarea" placeholder="Share any specific recommendations from your healthcare provider..."></textarea>
                </div>

                <div class="form-group">
                  <label for="clinician-name" class="form-label">Primary clinician's name <span class="form-label-optional">(optional)</span></label>
                  <input type="text" id="clinician-name" class="form-input" placeholder="e.g., Dr. Smith">
                </div>

                <div class="form-group">
                  <label for="clinician-phone" class="form-label">Clinician's contact number <span class="form-label-optional">(optional)</span></label>
                  <input type="tel" id="clinician-phone" class="form-input" placeholder="e.g., (555) 123-4567">
                </div>

                <div class="form-group">
                  <label for="pharmacy-name" class="form-label">Pharmacy name <span class="form-label-optional">(optional)</span></label>
                  <input type="text" id="pharmacy-name" class="form-input" placeholder="e.g., Shoppers Drug Mart">
                </div>

                <div class="form-group">
                  <label for="pharmacy-phone" class="form-label">Pharmacy phone number <span class="form-label-optional">(optional)</span></label>
                  <input type="tel" id="pharmacy-phone" class="form-input" placeholder="e.g., (555) 987-6543">
                </div>

                <!-- Document Uploads Section -->
                <div class="form-group" style="margin-top: var(--space-6);">
                  <h3 style="margin-bottom: var(--space-4); font-size: 1.125rem;">Upload Medical Documents <span class="form-label-optional">(optional)</span></h3>
                  <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: var(--space-4);">Upload photos of PT instructions, condition information, or doctor's recommendations to help personalize your care plan.</p>

                  <div class="document-upload-grid">
                    <!-- PT Instructions Upload -->
                    <div class="document-upload-card">
                      <div class="document-upload-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                          <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                          <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                        </svg>
                      </div>
                      <label class="document-upload-label">PT Instructions</label>
                      <p class="document-upload-desc">Exercise sheets, therapy protocols</p>
                      <input type="file" id="upload-pt-instructions" accept="image/*,.pdf" class="document-upload-input" onchange="handleDocumentUpload(this, 'pt-instructions')">
                      <label for="upload-pt-instructions" class="btn btn-outline btn-sm">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                        </svg>
                        Upload
                      </label>
                      <div id="preview-pt-instructions" class="document-preview"></div>
                    </div>

                    <!-- Condition Info Upload -->
                    <div class="document-upload-card">
                      <div class="document-upload-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                          <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                        </svg>
                      </div>
                      <label class="document-upload-label">Condition Info</label>
                      <p class="document-upload-desc">Diagnosis details, test results</p>
                      <input type="file" id="upload-condition-info" accept="image/*,.pdf" class="document-upload-input" onchange="handleDocumentUpload(this, 'condition-info')">
                      <label for="upload-condition-info" class="btn btn-outline btn-sm">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                        </svg>
                        Upload
                      </label>
                      <div id="preview-condition-info" class="document-preview"></div>
                    </div>

                    <!-- Doctor Recommendations Upload -->
                    <div class="document-upload-card">
                      <div class="document-upload-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                          <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/>
                          <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
                          <path d="M12 11v6M9 14h6"/>
                        </svg>
                      </div>
                      <label class="document-upload-label">Doctor Notes</label>
                      <p class="document-upload-desc">Prescriptions, recommendations</p>
                      <input type="file" id="upload-doctor-notes" accept="image/*,.pdf" class="document-upload-input" onchange="handleDocumentUpload(this, 'doctor-notes')">
                      <label for="upload-doctor-notes" class="btn btn-outline btn-sm">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                        </svg>
                        Upload
                      </label>
                      <div id="preview-doctor-notes" class="document-preview"></div>
                    </div>
                  </div>
                </div>

                <div class="safety-banner" style="margin-top: var(--space-6);">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
                  </svg>
                  <p>By submitting this form, you understand that Caribou provides supportive care guidance based on your clinician's recommendations and does not replace professional medical advice, diagnosis, or treatment.</p>
                </div>
              </div>

              <!-- Navigation Buttons -->
              <div class="flex justify-between mt-8">
                <button type="button" class="btn btn-ghost" id="prev-step" onclick="changeStep(-1)" style="visibility: hidden;">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                  </svg>
                  Previous
                </button>
                <button type="button" class="btn btn-primary" id="next-step" onclick="changeStep(1)">
                  Next
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                </button>
                <button type="submit" class="btn btn-primary btn-lg" id="submit-btn" style="display: none;">
                  Choose Your Plan
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Tier Selection Page (shown after intake) -->
      <div id="page-tiers" class="page">
        <div class="container">
          <div class="text-center mb-8">
            <img src="assets/logo.png" alt="Caribou" class="intake-logo logo-no-bg" style="margin-bottom: var(--space-4);">
            <h1>Choose Your Plan</h1>
            <p class="welcome-slogan" style="margin-bottom: var(--space-2);">"Because we Caribou-t you"</p>
            <p style="color: var(--gray-600); margin-top: var(--space-2); max-width: 600px; margin-left: auto; margin-right: auto;">Your personalized care plan is ready! Select a plan to get started.</p>
          </div>

          <div class="tier-grid tier-grid-4">
            <!-- Free Tier -->
            <div class="tier-card">
              <div class="tier-card-header">
                <h3 class="tier-card-name">Free</h3>
                <div class="tier-card-price">$0<span>/month</span></div>
              </div>
              <div class="tier-card-body">
                <ul class="tier-features">
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Nutrition and PT plans
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Prescription management
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Limited to one condition
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Daily care dashboard
                  </li>
                </ul>
                <button class="btn btn-outline" style="width: 100%;" onclick="selectTier('free')">Start Free</button>
              </div>
            </div>

            <!-- Premium Tier -->
            <div class="tier-card featured">
              <div class="tier-card-header">
                <span class="tier-badge">Most Popular</span>
                <h3 class="tier-card-name">Premium</h3>
                <div class="tier-card-price">$10<span>CAD/month</span></div>
              </div>
              <div class="tier-card-body">
                <ul class="tier-features">
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Everything in Free
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    2-3 concurrent conditions
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Nutrition macros tracking
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Enhanced AI personalization
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Update your conditions
                  </li>
                </ul>
                <button class="btn btn-primary" style="width: 100%;" onclick="selectTier('premium')">Start Premium</button>
              </div>
            </div>

            <!-- Family Tier -->
            <div class="tier-card">
              <div class="tier-card-header">
                <h3 class="tier-card-name">Family</h3>
                <div class="tier-card-price">$25<span>CAD/month</span></div>
              </div>
              <div class="tier-card-body">
                <ul class="tier-features">
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Everything in Premium
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Multiple user profiles
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Full access to all pillars
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Cura AI chatbot 24/7
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Priority support
                  </li>
                </ul>
                <button class="btn btn-outline" style="width: 100%;" onclick="selectTier('family')">Start Family</button>
              </div>
            </div>

            <!-- Enterprise Tier -->
            <div class="tier-card">
              <div class="tier-card-header">
                <h3 class="tier-card-name">Enterprise</h3>
                <div class="tier-card-price">$50+<span>CAD/month</span></div>
              </div>
              <div class="tier-card-body">
                <ul class="tier-features">
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Everything in Family
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    One-on-one health coaching
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Advanced AI insights
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Personalized screening
                  </li>
                  <li>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Dedicated account manager
                  </li>
                </ul>
                <button class="btn btn-outline" style="width: 100%;" onclick="selectTier('enterprise')">Contact Us</button>
              </div>
            </div>
          </div>

          <!-- Promo Code Section -->
          <div class="promo-code-section" style="max-width: 400px; margin: var(--space-8) auto 0;">
            <div class="promo-code-card" style="background: var(--gray-50); padding: var(--space-4); border-radius: var(--radius); border: 1px dashed var(--gray-300);">
              <div style="display: flex; align-items: center; gap: var(--space-2); margin-bottom: var(--space-3);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-600)" stroke-width="2">
                  <polyline points="20 12 20 22 4 22 4 12"/>
                  <rect x="2" y="7" width="20" height="5"/>
                  <line x1="12" y1="22" x2="12" y2="7"/>
                  <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/>
                  <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/>
                </svg>
                <span style="font-weight: 600; color: var(--gray-700);">Have a promo code?</span>
              </div>
              <div style="display: flex; gap: var(--space-2);">
                <input
                  type="text"
                  id="promo-code-input"
                  placeholder="Enter promo code"
                  style="flex: 1; padding: var(--space-2) var(--space-3); border: 1px solid var(--gray-300); border-radius: var(--radius); font-size: 0.9rem; text-transform: uppercase;"
                  oninput="this.value = this.value.toUpperCase()"
                >
                <button
                  type="button"
                  class="btn btn-outline"
                  onclick="applyPromoCode()"
                  style="padding: var(--space-2) var(--space-4);"
                >Apply</button>
              </div>
              <div id="promo-code-result" style="margin-top: var(--space-2); font-size: 0.85rem; display: none;"></div>
            </div>
          </div>

          <div class="text-center mt-8">
            <p style="color: var(--gray-500); font-size: 0.875rem;">All plans include our medical safety features and clinician reference tools.<br>Cancel anytime. No long-term commitments.</p>
          </div>
        </div>
      </div>

      <!-- Home / Dashboard Page -->
      <div id="page-home" class="page">
        <div class="container">
          <!-- Family Member Toggle (Family Plan Only) -->
          <div class="family-toggle-bar" id="family-toggle-bar" style="display: none;">
            <div class="family-toggle-content">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
              <span>Viewing plan for:</span>
              <select id="family-member-toggle" class="family-member-select" onchange="onFamilyMemberToggle(this.value)">
                <option value="self">Myself</option>
                <!-- Family members will be populated dynamically -->
              </select>
            </div>
          </div>

          <!-- Welcome Section -->
          <div class="card mb-6" id="welcome-section">
            <div class="welcome-header">
              <div>
                <h1><span id="user-greeting">Welcome back</span><span id="user-name-display"></span></h1>
                <p style="color: var(--gray-600); margin-top: var(--space-2);" id="welcome-subtitle">Here's your personalized care plan for today.</p>
              </div>
              <div class="diagnosis-badge" id="diagnosis-badge">
                <span id="diagnosis-display">Knee Sprain</span>
              </div>
            </div>
            <!-- Family member indicator -->
            <div id="family-member-indicator" class="family-member-indicator" style="display: none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              <span>Family Plan - <span id="viewing-member-name"></span>'s Care Plan</span>
              <button class="btn-link" onclick="switchToSelfProfile()">Switch to my plan</button>
            </div>
          </div>

          <!-- Prominent Condition Highlight Banner -->
          <div class="condition-highlight-banner" id="condition-highlight-banner">
            <div class="condition-highlight-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
              </svg>
            </div>
            <div class="condition-highlight-content">
              <div class="condition-highlight-label">Your Primary Focus</div>
              <div class="condition-highlight-conditions" id="condition-highlight-conditions">
                <!-- Conditions will be populated dynamically -->
              </div>
            </div>
            <a href="#" class="condition-highlight-link" onclick="navigateTo('condition'); return false;">
              View Details
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </a>
          </div>

          <!-- Safety Banner -->
          <div class="safety-banner">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
            </svg>
            <p><strong>Important:</strong> This plan supports your clinician's recommendations and does not replace medical advice. Always follow your healthcare provider's instructions and contact them with any concerns.</p>
          </div>

          <!-- Progress Tracker -->
          <div class="progress-tracker-container">
            <div class="progress-tracker-ring">
              <svg viewBox="0 0 120 120" class="progress-ring-svg">
                <circle class="progress-ring-bg" cx="60" cy="60" r="52" />
                <circle class="progress-ring-fill" id="progress-ring-fill" cx="60" cy="60" r="52" />
              </svg>
              <div class="progress-ring-text">
                <span class="progress-ring-value" id="progress-percent">0%</span>
                <span class="progress-ring-label">Complete</span>
              </div>
            </div>
            <div class="progress-tracker-stats">
              <div class="progress-stat">
                <div class="progress-stat-value" id="tasks-completed">0/0</div>
                <div class="progress-stat-label">Tasks Today</div>
              </div>
              <div class="progress-stat">
                <div class="progress-stat-value" id="streak-count">1</div>
                <div class="progress-stat-label">Day Streak</div>
              </div>
              <div class="progress-stat">
                <div class="progress-stat-value" id="weekly-progress">0%</div>
                <div class="progress-stat-label">This Week</div>
              </div>
            </div>
          </div>

          <!-- Daily Check-in Section (Period Tracker Style) -->
          <div class="card mb-6" id="daily-checkin-card">
            <div class="daily-checkin-header">
              <h2>Daily Check-in</h2>
              <p>How are you feeling today?</p>
            </div>

            <!-- Pain Level -->
            <div class="tracker-section">
              <div class="tracker-section-header">
                <div class="tracker-section-icon pain">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                  </svg>
                </div>
                <h3>Pain Level</h3>
              </div>
              <div class="icon-select-grid" id="daily-pain-level">
                <div class="icon-select-item" data-value="none" data-rating="1" onclick="selectDailyCheckin('pain', 'none')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>No Pain</span>
                </div>
                <div class="icon-select-item" data-value="mild" data-rating="2" onclick="selectDailyCheckin('pain', 'mild')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <line x1="8" y1="15" x2="16" y2="15"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Mild</span>
                </div>
                <div class="icon-select-item" data-value="moderate" data-rating="3" onclick="selectDailyCheckin('pain', 'moderate')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M16 16s-1.5-2-4-2-4 2-4 2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Moderate</span>
                </div>
                <div class="icon-select-item" data-value="severe" data-rating="4" onclick="selectDailyCheckin('pain', 'severe')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M16 16s-1.5-2-4-2-4 2-4 2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                      <path d="M8 4l1 2M16 4l-1 2"/>
                    </svg>
                  </div>
                  <span>Severe</span>
                </div>
              </div>
            </div>

            <!-- Sleep Quality -->
            <div class="tracker-section">
              <div class="tracker-section-header">
                <div class="tracker-section-icon sleep">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                  </svg>
                </div>
                <h3>Sleep Quality</h3>
              </div>
              <div class="icon-select-grid" id="daily-sleep-quality">
                <div class="icon-select-item" data-value="poor" data-rating="4" onclick="selectDailyCheckin('sleep', 'poor')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M16 16s-1.5-2-4-2-4 2-4 2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Woke Up Tired</span>
                </div>
                <div class="icon-select-item" data-value="okay" data-rating="3" onclick="selectDailyCheckin('sleep', 'okay')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <line x1="8" y1="15" x2="16" y2="15"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Okay</span>
                </div>
                <div class="icon-select-item" data-value="good" data-rating="2" onclick="selectDailyCheckin('sleep', 'good')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Refreshed</span>
                </div>
                <div class="icon-select-item" data-value="excellent" data-rating="1" onclick="selectDailyCheckin('sleep', 'excellent')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                      <path d="M12 2v2M2 12h2M22 12h-2"/>
                    </svg>
                  </div>
                  <span>Amazing</span>
                </div>
              </div>
            </div>

            <!-- Mood / Energy -->
            <div class="tracker-section">
              <div class="tracker-section-header">
                <div class="tracker-section-icon mood">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                    <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                    <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                  </svg>
                </div>
                <h3>Mood & Energy</h3>
              </div>
              <div class="icon-select-grid" id="daily-mood">
                <div class="icon-select-item" data-value="low" data-rating="4" onclick="selectDailyCheckin('mood', 'low')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M16 16s-1.5-2-4-2-4 2-4 2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Low Energy</span>
                </div>
                <div class="icon-select-item" data-value="okay" data-rating="3" onclick="selectDailyCheckin('mood', 'okay')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <line x1="8" y1="15" x2="16" y2="15"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Fine</span>
                </div>
                <div class="icon-select-item" data-value="good" data-rating="2" onclick="selectDailyCheckin('mood', 'good')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Happy</span>
                </div>
                <div class="icon-select-item" data-value="great" data-rating="1" onclick="selectDailyCheckin('mood', 'great')">
                  <div class="icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                      <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                      <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                      <path d="M7 8l2-1M17 8l-2-1"/>
                    </svg>
                  </div>
                  <span>Great!</span>
                </div>
              </div>
            </div>

            <button class="btn btn-primary" onclick="saveDailyCheckin()" style="width: 100%; margin-top: var(--space-4);">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: var(--space-2);">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                <polyline points="17 21 17 13 7 13 7 21"/>
                <polyline points="7 3 7 8 15 8"/>
              </svg>
              Save Check-in
            </button>
          </div>

          <!-- Check-in Complete Summary (shown after completing daily check-in) -->
          <div class="card mb-6 checkin-complete-card" id="checkin-complete-summary" style="display: none;">
            <div class="checkin-complete-mini">
              <div class="checkin-complete-left">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                  <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                <span>Today's Check-in Complete</span>
              </div>
              <div class="checkin-complete-data" id="checkin-complete-data">
                <!-- Populated dynamically -->
              </div>
            </div>
          </div>

          <!-- Check-in History Section -->
          <div class="card mb-6" id="checkin-history-card" style="display: none;">
            <div class="checkin-history-header">
              <div class="checkin-history-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                <h3>Recent Check-ins</h3>
              </div>
              <button class="btn-link" onclick="toggleCheckinHistoryExpand()">
                <span id="checkin-history-toggle-text">View All</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </button>
            </div>
            <div class="checkin-history-list" id="checkin-history-list">
              <!-- History items will be populated dynamically -->
            </div>
          </div>

          <div class="dashboard-grid">
            <div class="dashboard-main">
              <!-- Today's Care Plan -->
              <div class="plan-card">
                <div class="plan-card-header">
                  <h2>Today's Care Plan</h2>
                  <p id="today-date"></p>
                </div>
                <div class="plan-card-body">
                  <!-- Your Care Overview -->
                  <div class="card mb-6" style="background: var(--primary-50); border: 1px solid var(--primary-200);">
                    <div class="flex gap-4 items-center mb-4">
                      <div style="width: 40px; height: 40px; background: var(--primary-200); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-700)" stroke-width="2">
                          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                      </div>
                      <div>
                        <h4 style="font-size: 0.875rem; color: var(--primary-700);">Your Care Overview</h4>
                        <p style="font-size: 0.75rem; color: var(--gray-500);">Personalized guidance for your wellness journey</p>
                      </div>
                    </div>
                    <div id="care-overview-content" style="color: var(--gray-700); line-height: 1.6;">
                      Loading your personalized care overview...
                    </div>
                  </div>

                  <!-- Today's Checklist with Collapsible Categories -->
                  <h3 style="margin-bottom: var(--space-4);">Today's Tasks</h3>
                  <div class="task-categories" id="task-categories">
                    <!-- Collapsible task categories will be dynamically inserted here -->
                  </div>

                  <!-- Week Ahead View -->
                  <div class="week-ahead-section" style="margin-top: var(--space-8);">
                    <div class="week-ahead-header">
                      <h3>Week Ahead <span style="font-size: 0.75rem; color: var(--gray-500); font-weight: normal;">(Click day for details)</span></h3>
                      <div class="calendar-view-toggle">
                        <button class="view-toggle-btn active" id="week-view-btn" onclick="setCalendarView('week')">
                          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                          </svg>
                          Week
                        </button>
                        <button class="view-toggle-btn" id="month-view-btn" onclick="setCalendarView('month')">
                          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                            <line x1="9" y1="16" x2="9" y2="16.01"/>
                            <line x1="12" y1="16" x2="12" y2="16.01"/>
                            <line x1="15" y1="16" x2="15" y2="16.01"/>
                          </svg>
                          Month
                        </button>
                      </div>
                    </div>
                    <div class="week-ahead-grid" id="week-ahead-grid">
                      <!-- Week days will be dynamically inserted here -->
                    </div>
                    <div class="month-calendar-grid" id="month-calendar-grid" style="display: none;">
                      <!-- Month calendar will be dynamically inserted here -->
                    </div>
                  </div>

                  <!-- Day Preview Modal -->
                  <div id="day-preview-modal" class="day-preview-modal" style="display: none;">
                    <div class="day-preview-content">
                      <div class="day-preview-header">
                        <h3 id="day-preview-title">Day Preview</h3>
                        <button class="day-preview-close" onclick="closeDayPreview()">
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"/>
                          </svg>
                        </button>
                      </div>
                      <div class="day-preview-body" id="day-preview-body">
                        <!-- Day details will be dynamically inserted -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="dashboard-sidebar">
              <!-- Clinician Contact -->
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Your Care Team</h3>
                <div class="clinician-card" id="clinician-display">
                  <div class="clinician-avatar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                  </div>
                  <div class="clinician-info">
                    <h4 id="clinician-name-display">Your Clinician</h4>
                    <p>Primary Care Provider</p>
                  </div>
                </div>
                <div style="margin-top: var(--space-4);">
                  <a href="#" class="btn btn-outline btn-sm" style="width: 100%;" id="clinician-contact-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/>
                    </svg>
                    Contact Clinician
                  </a>
                </div>
                <p style="font-size: 0.75rem; color: var(--gray-500); margin-top: var(--space-3);">
                  For urgent concerns, please call your clinician or visit your nearest emergency room.
                </p>
              </div>

              <!-- Quick Links -->
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Quick Links</h3>
                <div class="flex flex-col gap-2">
                  <a href="#" onclick="navigateTo('nutrition'); return false;" class="btn btn-ghost" style="justify-content: flex-start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M18 8h1a4 4 0 010 8h-1M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8zM6 1v3M10 1v3M14 1v3"/>
                    </svg>
                    Nutrition Plan
                  </a>
                  <a href="#" onclick="navigateTo('medication'); return false;" class="btn btn-ghost" style="justify-content: flex-start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0016.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 002 8.5c0 2.3 1.5 4.05 3 5.5l7 7z"/>
                    </svg>
                    Medication Plan
                  </a>
                  <a href="#" onclick="navigateTo('physicaltherapy'); return false;" class="btn btn-ghost" style="justify-content: flex-start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="5" r="3"/>
                      <path d="M12 22V8M5 12H2a10 10 0 0020 0h-3"/>
                    </svg>
                    Fitness
                  </a>
                </div>
              </div>

              <!-- Progress Charts Section -->
              <div class="card">
                <h3 style="margin-bottom: var(--space-4);">Your Progress</h3>
                <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-4);">Track your recovery journey</p>

                <!-- Weekly Progress Chart -->
                <div class="progress-chart-container">
                  <h4 style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: var(--space-2);">7-Day Task Completion</h4>
                  <div class="weekly-progress-bars" id="weekly-progress-bars">
                    <div class="progress-bar-day">
                      <div class="progress-bar-fill" style="height: 0%;" data-day="Sun"></div>
                      <span class="progress-bar-label">S</span>
                    </div>
                    <div class="progress-bar-day">
                      <div class="progress-bar-fill" style="height: 0%;" data-day="Mon"></div>
                      <span class="progress-bar-label">M</span>
                    </div>
                    <div class="progress-bar-day">
                      <div class="progress-bar-fill" style="height: 0%;" data-day="Tue"></div>
                      <span class="progress-bar-label">T</span>
                    </div>
                    <div class="progress-bar-day">
                      <div class="progress-bar-fill" style="height: 0%;" data-day="Wed"></div>
                      <span class="progress-bar-label">W</span>
                    </div>
                    <div class="progress-bar-day">
                      <div class="progress-bar-fill" style="height: 0%;" data-day="Thu"></div>
                      <span class="progress-bar-label">T</span>
                    </div>
                    <div class="progress-bar-day">
                      <div class="progress-bar-fill" style="height: 0%;" data-day="Fri"></div>
                      <span class="progress-bar-label">F</span>
                    </div>
                    <div class="progress-bar-day">
                      <div class="progress-bar-fill" style="height: 0%;" data-day="Sat"></div>
                      <span class="progress-bar-label">S</span>
                    </div>
                  </div>
                </div>

                <!-- Health Metrics (if wearable connected) -->
                <div class="health-metrics-section" id="health-metrics-section" style="display: none; margin-top: var(--space-4); padding-top: var(--space-4); border-top: 1px solid var(--gray-200);">
                  <h4 style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: var(--space-3);">Health Metrics</h4>
                  <div class="health-metrics-grid">
                    <div class="health-metric-item">
                      <div class="health-metric-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--error)" stroke-width="2">
                          <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                        </svg>
                      </div>
                      <div class="health-metric-data">
                        <span class="health-metric-value" id="metric-heart-rate">--</span>
                        <span class="health-metric-label">BPM</span>
                      </div>
                    </div>
                    <div class="health-metric-item">
                      <div class="health-metric-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2">
                          <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                        </svg>
                      </div>
                      <div class="health-metric-data">
                        <span class="health-metric-value" id="metric-steps">--</span>
                        <span class="health-metric-label">Steps</span>
                      </div>
                    </div>
                    <div class="health-metric-item">
                      <div class="health-metric-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--info)" stroke-width="2">
                          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                        </svg>
                      </div>
                      <div class="health-metric-data">
                        <span class="health-metric-value" id="metric-sleep">--</span>
                        <span class="health-metric-label">hrs sleep</span>
                      </div>
                    </div>
                    <div class="health-metric-item">
                      <div class="health-metric-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2">
                          <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                        </svg>
                      </div>
                      <div class="health-metric-data">
                        <span class="health-metric-value" id="metric-recovery">--</span>
                        <span class="health-metric-label">Recovery</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Recovery Progress -->
                <div class="recovery-progress-section" style="margin-top: var(--space-4); padding-top: var(--space-4); border-top: 1px solid var(--gray-200);">
                  <h4 style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: var(--space-3);">Recovery Timeline</h4>
                  <div class="recovery-progress-bar">
                    <div class="recovery-progress-fill" id="recovery-progress-fill" style="width: 15%;"></div>
                  </div>
                  <div class="recovery-progress-labels">
                    <span>Start</span>
                    <span id="recovery-progress-percent">15%</span>
                    <span>Full Recovery</span>
                  </div>
                  <p style="font-size: 0.75rem; color: var(--gray-500); margin-top: var(--space-2); text-align: center;" id="recovery-estimate">
                    Estimated: 4-6 weeks remaining
                  </p>
                </div>

                <button class="btn btn-outline btn-sm" onclick="navigateTo('progress')" style="width: 100%; margin-top: var(--space-4);">
                  View Detailed Progress
                </button>

                <!-- Export to Spreadsheet -->
                <div style="margin-top: var(--space-4); padding-top: var(--space-4); border-top: 1px solid var(--gray-200);">
                  <h4 style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: var(--space-3);">Export Care Plan</h4>
                  <button class="btn btn-outline btn-sm" onclick="showExportOptions()" style="width: 100%;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: var(--space-2);">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                      <polyline points="7,10 12,15 17,10"/>
                      <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Export to Spreadsheet
                  </button>
                  <p style="font-size: 0.625rem; color: var(--gray-400); margin-top: var(--space-2); text-align: center;">
                    Download your 7-day look-ahead plan
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Nutrition Plan Page -->
      <div id="page-nutrition" class="page">
        <div class="container">
          <div class="safety-banner">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
            </svg>
            <p><strong>Important:</strong> These nutrition suggestions support your clinician's recommendations. They are not a substitute for professional dietary advice. Consult a registered dietitian for personalized nutrition plans.</p>
          </div>

          <h1 style="margin-bottom: var(--space-2);">Nutrition Plan</h1>
          <p style="color: var(--gray-600); margin-bottom: var(--space-2);" id="nutrition-subtitle">Personalized nutrition suggestions based on your care plan.</p>

          <!-- Dietary Restrictions Banner -->
          <div class="dietary-restrictions-banner" id="dietary-restrictions-banner" style="display: none;">
            <div class="dietary-restrictions-header">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                <path d="M9 12l2 2 4-4"/>
              </svg>
              <span>Your Dietary Profile</span>
            </div>
            <div class="dietary-restrictions-tags" id="dietary-restrictions-tags">
              <!-- Tags will be populated dynamically -->
            </div>
            <div class="dietary-restrictions-note">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
              </svg>
              <span>All meal suggestions exclude these items</span>
            </div>
          </div>

          <!-- Weight Tracker (shown if weight-loss is a condition) -->
          <div class="weight-tracker-card" id="weight-tracker-card" style="display: none;">
            <div class="weight-tracker-header">
              <div class="weight-tracker-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"/>
                  <path d="M12 6v6l4 2"/>
                </svg>
                <div>
                  <h3>Weight Tracker</h3>
                  <p>Track your progress toward your weight goal</p>
                </div>
              </div>
              <button class="weight-log-btn" onclick="openWeightLogModal()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"/>
                  <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                Log Weight
              </button>
            </div>
            <div class="weight-tracker-content">
              <div class="weight-stats">
                <div class="weight-stat">
                  <span class="weight-stat-label">Starting</span>
                  <span class="weight-stat-value" id="starting-weight">--</span>
                  <span class="weight-stat-unit">lbs</span>
                </div>
                <div class="weight-stat">
                  <span class="weight-stat-label">Current</span>
                  <span class="weight-stat-value current" id="current-weight">--</span>
                  <span class="weight-stat-unit">lbs</span>
                </div>
                <div class="weight-stat">
                  <span class="weight-stat-label">Goal</span>
                  <span class="weight-stat-value" id="goal-weight">--</span>
                  <span class="weight-stat-unit">lbs</span>
                </div>
              </div>
              <div class="weight-progress-container">
                <div class="weight-progress-bar">
                  <div class="weight-progress-fill" id="weight-progress-fill" style="width: 0%"></div>
                </div>
                <div class="weight-progress-label" id="weight-progress-label">Log your first weight to start tracking</div>
              </div>
              <div class="weight-history" id="weight-history">
                <!-- Weight log entries will appear here -->
              </div>
            </div>
          </div>

          <!-- Weight Log Modal -->
          <div class="modal-overlay" id="weight-log-modal" style="display: none;">
            <div class="modal-content weight-log-modal-content">
              <button class="modal-close" onclick="closeWeightLogModal()">&times;</button>
              <h2>Log Your Weight</h2>
              <div class="weight-log-form">
                <div class="form-group">
                  <label for="weight-input">Weight (lbs)</label>
                  <input type="number" id="weight-input" step="0.1" placeholder="Enter your weight">
                </div>
                <div class="form-group">
                  <label for="weight-date">Date</label>
                  <input type="date" id="weight-date">
                </div>
                <div class="form-group">
                  <label for="weight-notes">Notes (optional)</label>
                  <textarea id="weight-notes" placeholder="How are you feeling today?"></textarea>
                </div>
                <button class="btn btn-primary" onclick="saveWeightLog()">Save Entry</button>
              </div>
            </div>
          </div>

          <!-- Calorie Toggle -->
          <div class="calorie-toggle-container" id="calorie-toggle-container" style="margin-bottom: var(--space-4);">
            <label class="toggle-switch">
              <input type="checkbox" id="show-calories-toggle" onchange="toggleCalorieDisplay()">
              <span class="toggle-slider"></span>
            </label>
            <span class="toggle-label">Show calorie information</span>
          </div>

          <!-- Calorie and Macros info (hidden by default) -->
          <div class="calorie-info-banner" id="calorie-info" style="display: none;">
            <div class="calorie-macro-grid">
              <div class="calorie-stat calorie-stat-main">
                <span class="calorie-label">Daily Target</span>
                <span class="calorie-value" id="daily-calories">2000</span>
                <span class="calorie-unit">calories</span>
              </div>
              <div class="macro-stats" id="macro-stats">
                <div class="macro-stat">
                  <span class="macro-value" id="macro-protein">--</span>
                  <span class="macro-label">Protein</span>
                </div>
                <div class="macro-stat">
                  <span class="macro-value" id="macro-carbs">--</span>
                  <span class="macro-label">Carbs</span>
                </div>
                <div class="macro-stat">
                  <span class="macro-value" id="macro-fat">--</span>
                  <span class="macro-label">Fat</span>
                </div>
              </div>
            </div>
            <!-- Calorie deficit/surplus info tip for weight management -->
            <div class="calorie-goal-tip" id="calorie-goal-tip" style="display: none;">
              <div class="tip-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 16v-4M12 8h.01"/>
                </svg>
              </div>
              <div class="tip-content">
                <span class="tip-label" id="calorie-goal-label">Calorie Deficit</span>
                <span class="tip-description" id="calorie-goal-description">You're eating 500 calories below maintenance for steady weight loss.</span>
                <a href="#" onclick="navigateTo('condition'); return false;" class="tip-link">Learn more on My Condition</a>
              </div>
            </div>
          </div>

          <!-- Meal Tracking Reminders -->
          <div class="card mb-6" id="meal-tracking-header">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--space-4);">
              <div style="display: flex; align-items: center; gap: var(--space-3);">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-600)" stroke-width="2">
                  <rect x="3" y="5" width="18" height="14" rx="2"/>
                  <path d="M3 10h18"/>
                  <path d="M9 5V3M15 5V3"/>
                </svg>
                <div>
                  <h3 style="margin: 0;">Meal Tracking</h3>
                  <p style="color: var(--gray-500); font-size: 0.8rem; margin: 0;">Check off each meal as you eat it today</p>
                </div>
              </div>
              <span id="meal-tracking-count" style="font-size: 0.85rem; font-weight: 600; color: var(--primary-600);">0/4 logged</span>
            </div>
            <div class="meal-tracking-checklist" id="meal-tracking-checklist" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-3);">
              <label class="meal-track-item" id="track-breakfast" onclick="toggleMealEaten('breakfast')" style="display: flex; flex-direction: column; align-items: center; gap: var(--space-1); padding: var(--space-3); border-radius: var(--radius-lg); border: 2px solid var(--gray-200); cursor: pointer; transition: all 0.2s;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="17" r="4"/><path d="M12 9v2"/><path d="M5.6 12.4l1.4 1.4"/><path d="M18.4 12.4l-1.4 1.4"/><line x1="2" y1="21" x2="22" y2="21"/>
                </svg>
                <span style="font-size: 0.75rem; font-weight: 500;">Breakfast</span>
              </label>
              <label class="meal-track-item" id="track-lunch" onclick="toggleMealEaten('lunch')" style="display: flex; flex-direction: column; align-items: center; gap: var(--space-1); padding: var(--space-3); border-radius: var(--radius-lg); border: 2px solid var(--gray-200); cursor: pointer; transition: all 0.2s;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2"/>
                </svg>
                <span style="font-size: 0.75rem; font-weight: 500;">Lunch</span>
              </label>
              <label class="meal-track-item" id="track-dinner" onclick="toggleMealEaten('dinner')" style="display: flex; flex-direction: column; align-items: center; gap: var(--space-1); padding: var(--space-3); border-radius: var(--radius-lg); border: 2px solid var(--gray-200); cursor: pointer; transition: all 0.2s;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                </svg>
                <span style="font-size: 0.75rem; font-weight: 500;">Dinner</span>
              </label>
              <label class="meal-track-item" id="track-snack" onclick="toggleMealEaten('snack')" style="display: flex; flex-direction: column; align-items: center; gap: var(--space-1); padding: var(--space-3); border-radius: var(--radius-lg); border: 2px solid var(--gray-200); cursor: pointer; transition: all 0.2s;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
                </svg>
                <span style="font-size: 0.75rem; font-weight: 500;">Snack</span>
              </label>
            </div>
          </div>

          <!-- Today's Meal Plan -->
          <div class="card mb-6">
            <h2 style="margin-bottom: var(--space-4);">Today's Meals</h2>
            <p style="color: var(--gray-600); margin-bottom: var(--space-6);">Meal suggestions tailored to your dietary preferences and health goals.</p>

            <div class="meals-grid" id="meals-container">
              <!-- Meals will be dynamically inserted -->
            </div>
          </div>

          <!-- Weekly Grocery List -->
          <div class="card mb-8" id="grocery-list-section">
            <div class="grocery-list-header">
              <div>
                <h2 style="margin-bottom: var(--space-2);">Grocery List</h2>
                <p id="grocery-date-range" style="color: var(--gray-700); font-size: 0.9rem; font-weight: 500;"></p>
                <p id="grocery-week-label" style="color: var(--gray-500); font-size: 0.8rem; margin-top: var(--space-1);"></p>
              </div>
              <div style="display: flex; flex-direction: column; gap: var(--space-2); align-items: flex-end;">
                <div class="grocery-weeks-selector">
                  <label style="font-size: 0.75rem; color: var(--gray-600);">Plan for:</label>
                  <select id="grocery-weeks-select" onchange="updateGroceryWeeks(this.value)" style="padding: var(--space-1) var(--space-2); border-radius: var(--radius); border: 1px solid var(--gray-200); font-size: 0.875rem;">
                    <option value="1">1 Week</option>
                    <option value="2">2 Weeks</option>
                    <option value="3">3 Weeks</option>
                  </select>
                </div>
                <div style="display: flex; gap: var(--space-2);">
                  <button class="btn btn-primary btn-sm" onclick="exportGroceryList()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/>
                      <polyline points="16 6 12 2 8 6"/>
                      <line x1="12" y1="2" x2="12" y2="15"/>
                    </svg>
                    Export
                  </button>
                  <button class="btn btn-outline btn-sm" onclick="printGroceryList()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/>
                      <rect x="6" y="14" width="12" height="8"/>
                    </svg>
                    Print
                  </button>
                </div>
              </div>
            </div>
            <div class="grocery-categories" id="grocery-categories">
              <!-- Grocery categories will be dynamically inserted -->
            </div>
          </div>

          <!-- Custom Meal Modal -->
          <div class="modal-overlay" id="custom-meal-modal" style="display: none;" onclick="if(event.target===this)closeCustomMealModal()">
            <div class="modal-content" style="max-width: 520px; max-height: 90vh; overflow-y: auto; padding: var(--space-8);">
              <button class="modal-close" onclick="closeCustomMealModal()">&times;</button>

              <div style="text-align: center; margin-bottom: var(--space-6);">
                <div style="width: 48px; height: 48px; background: var(--primary-light); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-bottom: var(--space-3);">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-600)" stroke-width="2">
                    <path d="M12 5v14M5 12h14"/>
                  </svg>
                </div>
                <h2 style="margin-bottom: var(--space-2); font-size: 1.25rem;">Log Your Own Meal</h2>
                <p style="color: var(--gray-500); font-size: 0.875rem;">Enter your recipe and Caribou will estimate the calories.</p>
              </div>

              <div class="form-group" style="margin-bottom: var(--space-5);">
                <label class="form-label">Meal Name <span style="color: var(--error);">*</span></label>
                <input type="text" id="custom-meal-name" class="form-input" placeholder="e.g., Grilled Chicken with Rice">
              </div>

              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-5);">
                <div class="form-group" style="margin-bottom: 0;">
                  <label class="form-label">Replacing which meal?</label>
                  <select id="custom-meal-type" class="form-input">
                    <option value="breakfast">Breakfast</option>
                    <option value="lunch">Lunch</option>
                    <option value="dinner">Dinner</option>
                    <option value="snack">Snack</option>
                  </select>
                </div>
                <div class="form-group" style="margin-bottom: 0;">
                  <label class="form-label">Servings</label>
                  <input type="number" id="custom-meal-servings" class="form-input" value="1" min="1" max="10">
                </div>
              </div>

              <div class="form-group" style="margin-bottom: var(--space-5);">
                <label class="form-label">Replace for how long?</label>
                <select id="custom-meal-days" class="form-input">
                  <option value="1">Just today</option>
                  <option value="2">Next 2 days</option>
                  <option value="3">Next 3 days</option>
                  <option value="5">Next 5 days</option>
                  <option value="7">Full week</option>
                </select>
              </div>

              <div class="form-group" style="margin-bottom: var(--space-5);">
                <label class="form-label">Ingredients <span style="color: var(--error);">*</span></label>
                <p style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: var(--space-2);">One ingredient per line with quantity</p>
                <textarea id="custom-meal-ingredients" class="form-input" rows="5" placeholder="2 cups brown rice&#10;8 oz chicken breast&#10;1 cup broccoli&#10;2 tbsp olive oil&#10;1 clove garlic"></textarea>
              </div>

              <div class="form-group" style="margin-bottom: var(--space-5);">
                <label class="form-label">Instructions <span style="font-size: 0.75rem; color: var(--gray-500);">(optional)</span></label>
                <textarea id="custom-meal-instructions" class="form-input" rows="2" placeholder="Describe how to prepare this meal..."></textarea>
              </div>

              <!-- Calorie estimate preview -->
              <div id="custom-meal-calorie-preview" style="display: none; background: var(--primary-light); border: 1px solid var(--primary-200); border-radius: var(--radius-lg); padding: var(--space-4); margin-bottom: var(--space-5);">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="font-weight: 600; color: var(--primary-dark);">Estimated Calories</span>
                  <span id="custom-meal-calories-value" style="font-size: 1.25rem; font-weight: 700; color: var(--primary-600);">--</span>
                </div>
                <p style="font-size: 0.75rem; color: var(--gray-500); margin-top: var(--space-1);">Based on standard nutritional data for listed ingredients.</p>
              </div>

              <div style="display: flex; gap: var(--space-3);">
                <button class="btn btn-outline" onclick="calculateCustomMealCalories()" style="flex: 1; padding: var(--space-3);">Calculate Calories</button>
                <button class="btn btn-primary" onclick="saveCustomMeal()" style="flex: 1; padding: var(--space-3);">Save Meal</button>
              </div>
            </div>
          </div>

          <div class="dashboard-grid">
            <div class="dashboard-main">
              <div class="card mb-6">
                <h2 style="margin-bottom: var(--space-4);">Nutrition Guidelines for Your Condition</h2>
                <div id="condition-nutrition-guidelines">
                  <!-- Condition-specific guidelines will be inserted here -->
                </div>
              </div>
            </div>

            <div class="dashboard-sidebar">
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Your Dietary Profile</h3>
                <div id="dietary-profile">
                  <p style="color: var(--gray-500); font-size: 0.875rem;">No dietary restrictions recorded.</p>
                </div>
              </div>

              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Hydration Tracker</h3>
                <div class="hydration-tracker">
                  <div class="hydration-glasses" id="hydration-glasses">
                    <!-- Water glasses will be inserted here -->
                  </div>
                  <p style="font-size: 0.875rem; color: var(--gray-600); margin-top: var(--space-2);">
                    <span id="water-count">0</span>/8 glasses today
                  </p>
                </div>
              </div>

              <div class="card">
                <h3 style="margin-bottom: var(--space-4);">Speak with a Professional</h3>
                <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: var(--space-4);">For personalized nutrition counseling, consider consulting a registered dietitian.</p>
                <a href="#" class="btn btn-outline btn-sm" style="width: 100%;">Find a Dietitian</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Medication Plan Page -->
      <div id="page-medication" class="page">
        <div class="container">
          <div class="safety-banner safety-banner-warning">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
              <path d="M12 9v4M12 17h.01"/>
            </svg>
            <p><strong>Medical Safety Notice:</strong> This page provides reminders for medications prescribed by your clinician. Always take medications exactly as prescribed. Never adjust dosages or stop medications without consulting your healthcare provider. Contact your clinician or pharmacist with any questions.</p>
          </div>

          <h1 style="margin-bottom: var(--space-2);">Medication Reminders</h1>
          <p style="color: var(--gray-600); margin-bottom: var(--space-8);">Track and manage your prescribed medications.</p>

          <div class="dashboard-grid">
            <div class="dashboard-main">
              <div class="card mb-6">
                <h2 style="margin-bottom: var(--space-4);">Today's Medications</h2>
                <p style="color: var(--gray-600); margin-bottom: var(--space-6);">Reminders based on your clinician's prescriptions.</p>

                <ul class="checklist" id="medication-checklist">
                  <!-- Medication tasks will be dynamically inserted -->
                </ul>

                <div id="no-medications-message" style="display: none; text-align: center; padding: var(--space-8); color: var(--gray-500);">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin: 0 auto var(--space-4);">
                    <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0016.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 002 8.5c0 2.3 1.5 4.05 3 5.5l7 7z"/>
                  </svg>
                  <p>No medications recorded. You can add medications through the AI assistant or update your profile.</p>
                </div>
              </div>

              <div class="card">
                <h2 style="margin-bottom: var(--space-4);">Important Reminders</h2>
                <div style="background: var(--gray-50); padding: var(--space-4); border-radius: var(--radius); margin-bottom: var(--space-4);">
                  <h4 style="margin-bottom: var(--space-2);">Taking Your Medication Safely</h4>
                  <ul style="margin-left: var(--space-4); color: var(--gray-600); font-size: 0.875rem;">
                    <li>Take medications at the same time each day</li>
                    <li>Never double up on missed doses unless instructed</li>
                    <li>Store medications as directed on the label</li>
                    <li>Keep a list of all medications for medical appointments</li>
                  </ul>
                </div>
                <div style="background: var(--error-light); padding: var(--space-4); border-radius: var(--radius);">
                  <h4 style="margin-bottom: var(--space-2); color: var(--error);">When to Contact Your Clinician</h4>
                  <ul style="margin-left: var(--space-4); color: var(--gray-700); font-size: 0.875rem;">
                    <li>If you experience unexpected side effects</li>
                    <li>If you miss multiple doses</li>
                    <li>Before taking any new medications or supplements</li>
                    <li>If your symptoms worsen</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="dashboard-sidebar">
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Clinician Reference</h3>
                <div class="clinician-card">
                  <div class="clinician-avatar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                  </div>
                  <div class="clinician-info">
                    <h4 id="med-clinician-name">Your Clinician</h4>
                    <p>Primary Care Physician</p>
                  </div>
                </div>
                <div style="margin-top: var(--space-4);">
                  <a href="#" class="btn btn-outline btn-sm" style="width: 100%; margin-bottom: var(--space-2);" id="med-clinician-call">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/>
                    </svg>
                    Call Clinician
                  </a>
                </div>
              </div>

              <div class="card">
                <h3 style="margin-bottom: var(--space-4);">Pharmacy Contact</h3>
                <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: var(--space-3);">For refills or medication questions:</p>
                <p style="font-weight: 500;" id="pharmacy-name-display">Your Local Pharmacy</p>
                <p style="color: var(--gray-500); font-size: 0.875rem;" id="pharmacy-phone-display">(555) 987-6543</p>
                <a href="#" class="btn btn-outline btn-sm" style="width: 100%; margin-top: var(--space-3);" id="pharmacy-call-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/>
                  </svg>
                  Call Pharmacy
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Fitness Plan Page -->
      <div id="page-physicaltherapy" class="page">
        <div class="container">
          <div class="safety-banner">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
            </svg>
            <p><strong>Exercise Safely:</strong> These exercises support your physical therapist's recommendations. Stop any exercise that causes pain and consult your PT or clinician. Never push through sharp or worsening pain.</p>
          </div>

          <h1 style="margin-bottom: var(--space-2);">Fitness Plan</h1>
          <p style="color: var(--gray-600); margin-bottom: var(--space-8);" id="pt-subtitle">Exercises recommended for your condition.</p>

          <!-- Progress Stats -->
          <div class="stats-grid mb-8">
            <div class="stat-card">
              <div class="stat-card-icon primary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 11l3 3L22 4"/>
                  <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
                </svg>
              </div>
              <div class="stat-card-value" id="pt-completed">0/0</div>
              <div class="stat-card-label">Exercises Today</div>
            </div>
            <div class="stat-card">
              <div class="stat-card-icon secondary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 6v6l4 2"/>
                </svg>
              </div>
              <div class="stat-card-value" id="pt-duration">~20</div>
              <div class="stat-card-label">Minutes</div>
            </div>
            <div class="stat-card">
              <div class="stat-card-icon success">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                  <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                </svg>
              </div>
              <div class="stat-card-value" id="pt-week">Week 1</div>
              <div class="stat-card-label">Of Recovery</div>
            </div>
          </div>

          <div class="dashboard-grid">
            <div class="dashboard-main">
              <div class="card mb-6">
                <h2 style="margin-bottom: var(--space-4);">Today's Exercises</h2>
                <p style="color: var(--gray-600); margin-bottom: var(--space-6);">Complete these exercises as instructed. Quality over quantity - focus on proper form.</p>

                <ul class="checklist" id="pt-checklist">
                  <!-- PT exercises will be dynamically inserted -->
                </ul>
              </div>

              <!-- Pain Log -->
              <div class="card">
                <h2 style="margin-bottom: var(--space-4);">Pain & Progress Log</h2>
                <p style="color: var(--gray-600); margin-bottom: var(--space-4);">Track your symptoms to share with your physical therapist.</p>

                <div class="form-group">
                  <label class="form-label">Pain level after exercises today:</label>
                  <div class="rating-scale" id="pain-level">
                    <div class="rating-item" data-value="1" onclick="selectRating('pain-level', '1')">1</div>
                    <div class="rating-item" data-value="2" onclick="selectRating('pain-level', '2')">2</div>
                    <div class="rating-item" data-value="3" onclick="selectRating('pain-level', '3')">3</div>
                    <div class="rating-item" data-value="4" onclick="selectRating('pain-level', '4')">4</div>
                    <div class="rating-item" data-value="5" onclick="selectRating('pain-level', '5')">5</div>
                  </div>
                  <p class="form-hint">1 = No pain, 5 = Severe pain</p>
                </div>

                <div class="form-group">
                  <label for="pt-notes" class="form-label">Notes for your PT <span class="form-label-optional">(optional)</span></label>
                  <textarea id="pt-notes" class="form-textarea" placeholder="Any observations, difficulties, or questions for your next PT appointment..."></textarea>
                </div>

                <button class="btn btn-primary" onclick="savePTLog()">Save Today's Log</button>
              </div>

              <!-- PT Instructions Image Upload -->
              <div class="card">
                <h2 style="margin-bottom: var(--space-4);">PT Instructions Image</h2>
                <p style="color: var(--gray-600); margin-bottom: var(--space-4);">Upload images of exercise instructions, diagrams, or notes from your physical therapist.</p>
                <div class="image-upload-area" id="pt-instructions-upload">
                  <input type="file" id="pt-instructions-file" accept="image/*" onchange="handleImageUpload('ptInstructions', this)" style="display: none;">
                  <div class="image-upload-placeholder" id="pt-instructions-placeholder" onclick="document.getElementById('pt-instructions-file').click()">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                      <circle cx="8.5" cy="8.5" r="1.5"/>
                      <path d="M21 15l-5-5L5 21"/>
                    </svg>
                    <span>Click to upload PT instructions image</span>
                  </div>
                  <div class="image-upload-preview" id="pt-instructions-preview" style="display: none;">
                    <img id="pt-instructions-img" src="" alt="PT instructions">
                    <button type="button" class="image-remove-btn" onclick="removeImage('ptInstructions')">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="dashboard-sidebar">
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Your Physical Therapist</h3>
                <div class="clinician-card">
                  <div class="clinician-avatar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                  </div>
                  <div class="clinician-info">
                    <h4>Your Physical Therapist</h4>
                    <p>Physical Therapist</p>
                  </div>
                </div>
                <div style="margin-top: var(--space-4);">
                  <a href="#" class="btn btn-outline btn-sm" style="width: 100%;">Contact Your PT</a>
                </div>
              </div>

              <div class="card" style="background: var(--warning-light); border: 1px solid var(--warning);">
                <h3 style="margin-bottom: var(--space-3);">Stop If You Experience:</h3>
                <ul style="font-size: 0.875rem; color: var(--gray-700); margin-left: var(--space-4);">
                  <li>Sharp or sudden pain</li>
                  <li>Dizziness or lightheadedness</li>
                  <li>Numbness or tingling</li>
                  <li>Significant swelling</li>
                  <li>Chest pain or shortness of breath</li>
                </ul>
                <p style="font-size: 0.75rem; color: var(--gray-600); margin-top: var(--space-3);">Contact your clinician immediately if symptoms persist.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- My Condition Page -->
      <div id="page-condition" class="page">
        <div class="container">
          <h1 id="condition-page-title" style="margin-bottom: var(--space-2);">Understanding Your Condition</h1>
          <p id="condition-page-subtitle" style="color: var(--gray-600); margin-bottom: var(--space-8);">Learn about your diagnosis and how to manage it effectively.</p>

          <!-- Conditions Overview (shown for multiple conditions) -->
          <div class="card mb-8" id="conditions-overview-card" style="display: none; background: linear-gradient(135deg, var(--primary-50) 0%, var(--gray-50) 100%); border: 2px solid var(--primary-200);">
            <div class="condition-header">
              <div class="condition-icon primary" style="background: var(--primary-100);">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                  <path d="M2 17l10 5 10-5"/>
                  <path d="M2 12l10 5 10-5"/>
                </svg>
              </div>
              <div>
                <h2>Your Conditions at a Glance</h2>
                <p style="color: var(--gray-500);">Overview of your health conditions</p>
              </div>
            </div>
            <div id="conditions-overview-content" style="margin-top: var(--space-6);">
              <!-- Dynamically populated -->
            </div>
          </div>

          <!-- Integrated Care Plan (shown for multiple conditions) -->
          <div class="card mb-8" id="integrated-care-plan-card" style="display: none;">
            <div class="condition-header">
              <div class="condition-icon" style="background: #d1fae5; color: #059669;">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/>
                  <rect x="9" y="3" width="6" height="4" rx="1"/>
                  <path d="M9 14l2 2 4-4"/>
                </svg>
              </div>
              <div>
                <h2>Your Integrated Care Plan</h2>
                <p style="color: var(--gray-500);">How your treatment addresses all your conditions</p>
              </div>
            </div>
            <div id="integrated-care-content" style="margin-top: var(--space-6);">
              <!-- Dynamically populated -->
            </div>
          </div>

          <!-- Primary Condition -->
          <div class="card mb-8" id="primary-condition-card">
            <div class="condition-header">
              <div class="condition-icon primary">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                </svg>
              </div>
              <div>
                <h2 id="primary-condition-name">Your Primary Condition</h2>
                <p id="primary-condition-subtitle" style="color: var(--gray-500);">Primary Diagnosis</p>
              </div>
            </div>
            <div id="primary-condition-info" style="margin-top: var(--space-6);">
              <!-- Content will be dynamically inserted -->
            </div>

            <!-- Condition Info Image Upload -->
            <div class="image-upload-section" style="margin-top: var(--space-6);">
              <h4 style="margin-bottom: var(--space-3);">Condition Information Image</h4>
              <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-3);">Upload an image of diagnosis information, lab results, or relevant documents from your doctor.</p>
              <div class="image-upload-area" id="condition-info-upload">
                <input type="file" id="condition-info-file" accept="image/*" onchange="handleImageUpload('conditionInfo', this)" style="display: none;">
                <div class="image-upload-placeholder" id="condition-info-placeholder" onclick="document.getElementById('condition-info-file').click()">
                  <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <circle cx="8.5" cy="8.5" r="1.5"/>
                    <path d="M21 15l-5-5L5 21"/>
                  </svg>
                  <span>Click to upload image</span>
                </div>
                <div class="image-upload-preview" id="condition-info-preview" style="display: none;">
                  <img id="condition-info-img" src="" alt="Condition info">
                  <button type="button" class="image-remove-btn" onclick="removeImage('conditionInfo')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Doctor Recommendations / Goals -->
          <div class="card mb-8" id="doctor-goals-card">
            <div class="condition-header">
              <div class="condition-icon" style="background: #dbeafe; color: #1d4ed8;">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                  <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                </svg>
              </div>
              <div>
                <h2>Doctor's Recommendations & Goals</h2>
                <p style="color: var(--gray-500);">Your healthcare provider's personalized guidance</p>
              </div>
            </div>
            <div style="margin-top: var(--space-4);">
              <div class="profile-field">
                <label>Doctor's Goals & Recommendations</label>
                <textarea id="doctor-goals-text" class="form-input" rows="4" placeholder="Enter any goals or recommendations from your healthcare provider..."></textarea>
              </div>

              <!-- Doctor Recommendations Image Upload -->
              <div class="image-upload-section" style="margin-top: var(--space-4);">
                <h4 style="margin-bottom: var(--space-3);">Upload Doctor's Notes Image</h4>
                <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-3);">Upload an image of your doctor's written recommendations, prescriptions, or care instructions.</p>
                <div class="image-upload-area" id="doctor-recommendations-upload">
                  <input type="file" id="doctor-recommendations-file" accept="image/*" onchange="handleImageUpload('doctorRecommendations', this)" style="display: none;">
                  <div class="image-upload-placeholder" id="doctor-recommendations-placeholder" onclick="document.getElementById('doctor-recommendations-file').click()">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                      <circle cx="8.5" cy="8.5" r="1.5"/>
                      <path d="M21 15l-5-5L5 21"/>
                    </svg>
                    <span>Click to upload image</span>
                  </div>
                  <div class="image-upload-preview" id="doctor-recommendations-preview" style="display: none;">
                    <img id="doctor-recommendations-img" src="" alt="Doctor recommendations">
                    <button type="button" class="image-remove-btn" onclick="removeImage('doctorRecommendations')">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-primary" onclick="saveDoctorGoals()" style="margin-top: var(--space-4);">Save Recommendations</button>
            </div>
          </div>

          <!-- Other Conditions -->
          <div id="other-conditions-section" style="display: none;">
            <h2 style="margin-bottom: var(--space-4);">Other Health Conditions</h2>
            <div id="other-conditions-list">
              <!-- Other conditions will be dynamically inserted -->
            </div>
          </div>

          <!-- General Health Tips -->
          <div class="card mb-8">
            <h2 style="margin-bottom: var(--space-4);">Managing Multiple Conditions</h2>
            <p style="color: var(--gray-600); margin-bottom: var(--space-4);">
              When managing multiple health conditions, it's important to understand how they may interact and affect each other. Here are some general guidelines:
            </p>
            <ul style="list-style: none; padding: 0;">
              <li style="display: flex; gap: var(--space-3); margin-bottom: var(--space-3); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="flex-shrink: 0;">
                  <path d="M20 6L9 17l-5-5"/>
                </svg>
                <span>Keep a list of all your medications and share it with all your healthcare providers</span>
              </li>
              <li style="display: flex; gap: var(--space-3); margin-bottom: var(--space-3); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="flex-shrink: 0;">
                  <path d="M20 6L9 17l-5-5"/>
                </svg>
                <span>Track symptoms and discuss any new or worsening symptoms with your care team</span>
              </li>
              <li style="display: flex; gap: var(--space-3); margin-bottom: var(--space-3); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="flex-shrink: 0;">
                  <path d="M20 6L9 17l-5-5"/>
                </svg>
                <span>Follow lifestyle recommendations that benefit all your conditions when possible</span>
              </li>
              <li style="display: flex; gap: var(--space-3); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="flex-shrink: 0;">
                  <path d="M20 6L9 17l-5-5"/>
                </svg>
                <span>Coordinate care between specialists to ensure treatments don't conflict</span>
              </li>
            </ul>
          </div>

          <div class="safety-banner">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
            </svg>
            <p>This information is for educational purposes only. Always follow your healthcare provider's specific recommendations for your condition.</p>
          </div>
        </div>
      </div>

      <!-- Profile Page -->
      <div id="page-profile" class="page">
        <div class="container">
          <h1 style="margin-bottom: var(--space-2);">Your Profile</h1>
          <p style="color: var(--gray-600); margin-bottom: var(--space-8);">Manage your personal information and care preferences.</p>

          <div class="dashboard-grid">
            <div class="dashboard-main">
              <!-- Personal Information -->
              <div class="card mb-6">
                <h2 style="margin-bottom: var(--space-4);">Personal Information</h2>
                <div class="profile-field">
                  <label>Name</label>
                  <input type="text" id="profile-name" class="form-input" placeholder="Your name">
                </div>
                <div class="profile-field">
                  <label>Age</label>
                  <input type="number" id="profile-age" class="form-input" placeholder="Your age">
                </div>
                <!-- Unit toggle for profile -->
                <div class="profile-field">
                  <label>Preferred Units</label>
                  <div class="unit-toggle" id="profile-unit-toggle">
                    <button type="button" class="unit-option" data-unit="metric" onclick="toggleProfileUnits('metric')">Metric (kg, cm)</button>
                    <button type="button" class="unit-option" data-unit="imperial" onclick="toggleProfileUnits('imperial')">Imperial (lbs, ft/in)</button>
                  </div>
                </div>
                <!-- Metric height/weight -->
                <div class="profile-field-row" id="profile-metric-inputs">
                  <div class="profile-field">
                    <label>Height (cm)</label>
                    <input type="number" id="profile-height" class="form-input" placeholder="e.g., 170">
                  </div>
                  <div class="profile-field">
                    <label>Weight (kg)</label>
                    <input type="number" id="profile-weight" class="form-input" placeholder="e.g., 70">
                  </div>
                </div>
                <!-- Imperial height/weight -->
                <div class="profile-field-row" id="profile-imperial-inputs" style="display: none;">
                  <div class="profile-field">
                    <label>Height</label>
                    <div style="display: flex; gap: var(--space-2); align-items: center;">
                      <input type="number" id="profile-height-ft" class="form-input" placeholder="ft" min="3" max="8" style="width: 70px;">
                      <span>ft</span>
                      <input type="number" id="profile-height-in" class="form-input" placeholder="in" min="0" max="11" style="width: 70px;">
                      <span>in</span>
                    </div>
                  </div>
                  <div class="profile-field">
                    <label>Weight (lbs)</label>
                    <input type="number" id="profile-weight-lbs" class="form-input" placeholder="e.g., 154">
                  </div>
                </div>
              </div>

              <!-- Medication Information -->
              <div class="card mb-6">
                <h2 style="margin-bottom: var(--space-4);">Medications</h2>
                <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-4);">Add each medication separately with dosage information. Separate multiple medications with commas.</p>

                <!-- Medications List -->
                <div id="medications-list" class="medications-list">
                  <!-- Dynamically populated -->
                </div>

                <!-- Add New Medication Form -->
                <div class="add-medication-form" id="add-medication-form">
                  <h4 style="margin-bottom: var(--space-3);">Add New Medication</h4>
                  <div class="profile-field-row">
                    <div class="profile-field" style="flex: 2;">
                      <label>Medication Name <span style="color: var(--error);">*</span></label>
                      <input type="text" id="new-med-name" class="form-input" placeholder="e.g., Metformin" list="medication-suggestions">
                      <datalist id="medication-suggestions">
                        <!-- Populated from MedicationDatabase -->
                      </datalist>
                    </div>
                    <div class="profile-field" style="flex: 1;">
                      <label>Dosage</label>
                      <input type="text" id="new-med-dosage" class="form-input" placeholder="e.g., 500mg">
                    </div>
                  </div>
                  <div class="profile-field-row">
                    <div class="profile-field">
                      <label>Frequency</label>
                      <select id="new-med-frequency" class="form-input">
                        <option value="once daily">Once daily</option>
                        <option value="twice daily">Twice daily</option>
                        <option value="three times daily">Three times daily</option>
                        <option value="as needed">As needed (PRN)</option>
                        <option value="with meals">With meals</option>
                        <option value="at bedtime">At bedtime</option>
                        <option value="weekly">Weekly</option>
                        <option value="other">Other</option>
                      </select>
                    </div>
                    <div class="profile-field">
                      <label>Time of Day</label>
                      <select id="new-med-time" class="form-input">
                        <option value="morning">Morning</option>
                        <option value="afternoon">Afternoon</option>
                        <option value="evening">Evening</option>
                        <option value="morning,evening">Morning & Evening</option>
                        <option value="morning,afternoon,evening">Morning, Afternoon & Evening</option>
                      </select>
                    </div>
                    <div class="profile-field">
                      <label>For Condition</label>
                      <select id="new-med-condition" class="form-input">
                        <option value="">General</option>
                        <!-- Populated with user's conditions -->
                      </select>
                    </div>
                  </div>
                  <div class="profile-field">
                    <label>Special Instructions</label>
                    <input type="text" id="new-med-notes" class="form-input" placeholder="e.g., Take with food, avoid grapefruit">
                  </div>
                  <button type="button" class="btn btn-primary btn-sm" onclick="addMedicationFromForm()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 5v14M5 12h14"/>
                    </svg>
                    Add Medication
                  </button>
                </div>

                <hr style="margin: var(--space-6) 0; border: none; border-top: 1px solid var(--gray-200);">

                <div class="profile-field-row">
                  <div class="profile-field">
                    <label>Pharmacy Name</label>
                    <input type="text" id="profile-pharmacy" class="form-input" placeholder="Pharmacy name">
                  </div>
                  <div class="profile-field">
                    <label>Pharmacy Phone</label>
                    <input type="tel" id="profile-pharmacy-phone" class="form-input" placeholder="Phone number">
                  </div>
                </div>
              </div>

              <!-- Dietary Preferences -->
              <div class="card mb-6">
                <h2 style="margin-bottom: var(--space-4);">Nutrition Preferences</h2>
                <div class="profile-field">
                  <label>Dietary Restrictions</label>
                  <div id="profile-dietary-restrictions" class="checkbox-group">
                    <!-- Will be populated dynamically -->
                  </div>
                </div>
                <div class="profile-field">
                  <label>Food Allergies / Dislikes</label>
                  <textarea id="profile-food-notes" class="form-input" rows="3" placeholder="List any foods you're allergic to or dislike"></textarea>
                </div>
                <div class="profile-field-row">
                  <div class="profile-field">
                    <label>Breakfast Time</label>
                    <input type="time" id="profile-breakfast-time" class="form-input">
                  </div>
                  <div class="profile-field">
                    <label>Lunch Time</label>
                    <input type="time" id="profile-lunch-time" class="form-input">
                  </div>
                  <div class="profile-field">
                    <label>Dinner Time</label>
                    <input type="time" id="profile-dinner-time" class="form-input">
                  </div>
                </div>
              </div>

              <!-- Condition (Tier-locked) -->
              <div class="card mb-6" id="condition-update-card">
                <div class="profile-section-header">
                  <h2>Condition Information</h2>
                  <span class="tier-badge" id="condition-tier-badge">Premium Feature</span>
                </div>
                <!-- Weight management goal tag display -->
                <div id="condition-goal-tags" style="display: none; margin-bottom: var(--space-4);"></div>
                <div id="condition-locked-message" class="tier-locked-message">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                    <path d="M7 11V7a5 5 0 0110 0v4"/>
                  </svg>
                  <div>
                    <p style="font-weight: 600;">Upgrade to modify your condition</p>
                    <p style="font-size: 0.875rem; color: var(--gray-500);">Free tier users cannot change their primary diagnosis. Upgrade to Premium or Collaborative tier to unlock this feature.</p>
                  </div>
                  <button class="btn btn-primary btn-sm" onclick="navigateTo('tiers')">View Plans</button>
                </div>
                <div id="condition-edit-section" style="display: none;">
                  <!-- Primary Conditions Section (Premium: up to 3, Family: unlimited) -->
                  <div class="profile-field">
                    <label>Primary Diagnosis <span id="condition-limit-label" style="font-size: 0.75rem; color: var(--gray-500);"></span></label>
                    <div id="primary-conditions-container">
                      <!-- Dynamically populated with condition selects -->
                    </div>
                    <button type="button" id="add-condition-btn" class="btn btn-outline btn-sm" onclick="addPrimaryCondition()" style="margin-top: var(--space-2); display: none;">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                      </svg>
                      Add Another Condition
                    </button>
                  </div>
                  <div class="profile-field">
                    <label>Other Conditions</label>
                    <textarea id="profile-other-conditions" class="form-input" rows="3" placeholder="List any other health conditions not in the dropdown above"></textarea>
                  </div>
                </div>
              </div>

              <!-- Check-in History Section for Profile -->
              <div class="card mb-6" id="profile-checkin-history-card">
                <div class="checkin-history-header">
                  <div class="checkin-history-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                      <line x1="16" y1="2" x2="16" y2="6"/>
                      <line x1="8" y1="2" x2="8" y2="6"/>
                      <line x1="3" y1="10" x2="21" y2="10"/>
                    </svg>
                    <h2>Check-in History</h2>
                  </div>
                </div>
                <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-4);">Your daily health tracking log. Complete daily check-ins on the dashboard to build your history.</p>
                <div class="checkin-history-list profile-history" id="profile-checkin-history-list">
                  <!-- History items will be populated dynamically -->
                </div>
                <div id="no-checkin-history" class="empty-state" style="display: none; text-align: center; padding: var(--space-6);">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--gray-300)" stroke-width="1.5" style="margin-bottom: var(--space-3);">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                  </svg>
                  <p style="color: var(--gray-500);">No check-ins yet. Complete your first daily check-in on the dashboard!</p>
                </div>
              </div>

              <button class="btn btn-primary" onclick="saveProfile()" style="width: 100%;">Save Changes</button>
            </div>

            <div class="dashboard-sidebar">
              <!-- Current Tier -->
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Your Plan</h3>
                <div id="current-tier-display">
                  <div class="tier-display-badge">Free</div>
                  <p style="color: var(--gray-500); font-size: 0.875rem; margin-top: var(--space-2);">Basic care plan features</p>
                </div>
                <button class="btn btn-outline btn-sm" onclick="navigateTo('tiers')" style="width: 100%; margin-top: var(--space-4);">Upgrade Plan</button>
              </div>

              <!-- Family Sub-Profiles (Family tier only) -->
              <div class="card mb-6" id="family-profiles-section" style="display: none;">
                <div class="profile-section-header">
                  <h3>Family Profiles</h3>
                  <span class="tier-badge family" style="font-size: 0.625rem; padding: 2px 6px;">Family Plan</span>
                </div>
                <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-4);">Create care plans for your family members.</p>

                <!-- Current Profile Indicator -->
                <div class="current-profile-indicator" style="background: var(--primary-light); border-radius: var(--radius); padding: var(--space-3); margin-bottom: var(--space-4);">
                  <div style="display: flex; align-items: center; gap: var(--space-2);">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                    <span style="font-weight: 600; color: var(--primary);">Active: <span id="active-profile-name">You</span></span>
                  </div>
                </div>

                <!-- Family Profiles List -->
                <div id="family-profiles-list" class="family-profiles-list">
                  <!-- Dynamically populated -->
                </div>

                <!-- Add Family Member Button -->
                <button class="btn btn-outline btn-sm" onclick="showAddFamilyProfileModal()" style="width: 100%; margin-top: var(--space-3);">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="8.5" cy="7" r="4"/>
                    <line x1="20" y1="8" x2="20" y2="14"/>
                    <line x1="23" y1="11" x2="17" y2="11"/>
                  </svg>
                  Add Family Member
                </button>
              </div>

              <!-- Care Team -->
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Care Team</h3>
                <div class="profile-field">
                  <label>Clinician Name</label>
                  <input type="text" id="profile-clinician" class="form-input" placeholder="Your clinician's name">
                </div>
                <div class="profile-field">
                  <label>Clinician Phone</label>
                  <input type="tel" id="profile-clinician-phone" class="form-input" placeholder="Phone number">
                </div>
              </div>

              <!-- My Documents -->
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">My Documents</h3>
                <div id="profile-documents-list" class="profile-documents-list">
                  <p class="no-documents-message" style="color: var(--gray-500); font-size: 0.875rem;">No documents uploaded yet</p>
                </div>
                <button class="btn btn-outline btn-sm" onclick="showUploadDocumentModal()" style="width: 100%; margin-top: var(--space-3);">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                  </svg>
                  Upload Document
                </button>
              </div>

              <!-- Health Account Linking -->
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Connected Health Accounts</h3>
                <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-4);">Sync your health data for better insights</p>

                <div class="health-accounts-list">
                  <!-- Apple Health -->
                  <div class="health-account-item" id="health-account-apple">
                    <div class="health-account-info">
                      <div class="health-account-icon health-account-apple">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                        </svg>
                      </div>
                      <div>
                        <span class="health-account-name">Apple Health</span>
                        <span class="health-account-status" id="apple-health-status">Not connected</span>
                      </div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="connectHealthAccount('apple')" id="apple-health-btn">Connect</button>
                  </div>

                  <!-- Google Fit -->
                  <div class="health-account-item" id="health-account-google">
                    <div class="health-account-info">
                      <div class="health-account-icon health-account-google">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                      </div>
                      <div>
                        <span class="health-account-name">Google Fit</span>
                        <span class="health-account-status" id="google-fit-status">Not connected</span>
                      </div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="connectHealthAccount('google')" id="google-fit-btn">Connect</button>
                  </div>

                  <!-- Samsung Health -->
                  <div class="health-account-item" id="health-account-samsung">
                    <div class="health-account-info">
                      <div class="health-account-icon health-account-samsung">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.05-.2s-.16-.04-.23-.02c-.1.02-1.62 1.03-4.58 3.03-.43.3-.82.44-1.17.43-.39-.01-1.13-.22-1.68-.4-.68-.22-1.22-.34-1.17-.72.02-.2.35-.4.95-.62 3.69-1.6 6.15-2.66 7.39-3.17 3.52-1.46 4.25-1.71 4.72-1.72.11 0 .34.03.49.17.13.12.16.28.17.4-.01.1-.02.43-.04.68z"/>
                        </svg>
                      </div>
                      <div>
                        <span class="health-account-name">Samsung Health</span>
                        <span class="health-account-status" id="samsung-health-status">Not connected</span>
                      </div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="connectHealthAccount('samsung')" id="samsung-health-btn">Connect</button>
                  </div>

                  <!-- Fitbit -->
                  <div class="health-account-item" id="health-account-fitbit">
                    <div class="health-account-info">
                      <div class="health-account-icon health-account-fitbit">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zm0 18.5c-3.59 0-6.5-2.91-6.5-6.5S8.41 5.5 12 5.5s6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5zm0-10.5a4 4 0 100 8 4 4 0 000-8z"/>
                        </svg>
                      </div>
                      <div>
                        <span class="health-account-name">Fitbit</span>
                        <span class="health-account-status" id="fitbit-status">Not connected</span>
                      </div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="connectHealthAccount('fitbit')" id="fitbit-btn">Connect</button>
                  </div>
                </div>
              </div>

              <!-- Wearable Devices -->
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Wearable Devices</h3>
                <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-4);">Connect your wearable for automatic health tracking</p>

                <div class="wearable-devices-list">
                  <!-- Apple Watch -->
                  <div class="wearable-device-item" id="wearable-apple-watch">
                    <div class="wearable-device-info">
                      <div class="wearable-device-icon wearable-apple-watch">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                          <rect x="6" y="2" width="12" height="20" rx="2"/>
                          <rect x="8" y="5" width="8" height="11" rx="1"/>
                          <circle cx="12" cy="19" r="1"/>
                        </svg>
                      </div>
                      <div>
                        <span class="wearable-device-name">Apple Watch</span>
                        <span class="wearable-device-status" id="apple-watch-status">Not paired</span>
                      </div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="pairWearableDevice('apple-watch')" id="apple-watch-btn">Pair</button>
                  </div>

                  <!-- Garmin -->
                  <div class="wearable-device-item" id="wearable-garmin">
                    <div class="wearable-device-info">
                      <div class="wearable-device-icon wearable-garmin">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                          <circle cx="12" cy="12" r="9"/>
                          <path d="M12 7v5l3 3"/>
                        </svg>
                      </div>
                      <div>
                        <span class="wearable-device-name">Garmin</span>
                        <span class="wearable-device-status" id="garmin-status">Not paired</span>
                      </div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="pairWearableDevice('garmin')" id="garmin-btn">Pair</button>
                  </div>

                  <!-- Whoop -->
                  <div class="wearable-device-item" id="wearable-whoop">
                    <div class="wearable-device-info">
                      <div class="wearable-device-icon wearable-whoop">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                          <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                        </svg>
                      </div>
                      <div>
                        <span class="wearable-device-name">Whoop</span>
                        <span class="wearable-device-status" id="whoop-status">Not paired</span>
                      </div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="pairWearableDevice('whoop')" id="whoop-btn">Pair</button>
                  </div>

                  <!-- Oura Ring -->
                  <div class="wearable-device-item" id="wearable-oura">
                    <div class="wearable-device-info">
                      <div class="wearable-device-icon wearable-oura">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                          <circle cx="12" cy="12" r="8"/>
                          <circle cx="12" cy="12" r="4"/>
                        </svg>
                      </div>
                      <div>
                        <span class="wearable-device-name">Oura Ring</span>
                        <span class="wearable-device-status" id="oura-status">Not paired</span>
                      </div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="pairWearableDevice('oura')" id="oura-btn">Pair</button>
                  </div>
                </div>

                <div class="wearable-sync-info" style="margin-top: var(--space-4); padding: var(--space-3); background: var(--info-light); border-radius: var(--radius); font-size: 0.75rem; color: var(--info);">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: var(--space-2);">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
                  </svg>
                  Wearable data syncs automatically every 15 minutes when connected.
                </div>
              </div>

              <!-- Account Actions -->
              <div class="card" id="account-actions-card">
                <h3 style="margin-bottom: var(--space-4);">Account</h3>
                <div id="account-email-display" style="display: none; margin-bottom: var(--space-4); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius); font-size: 0.875rem;">
                  <span style="color: var(--gray-500);">Signed in as:</span>
                  <span id="account-email-text" style="font-weight: 500; display: block; margin-top: var(--space-1);"></span>
                </div>
                <button class="btn btn-outline btn-sm" onclick="exportData()" style="width: 100%; margin-bottom: var(--space-2);">Export My Data</button>
                <button id="change-password-btn" class="btn btn-outline btn-sm" onclick="showChangePasswordModal()" style="width: 100%; margin-bottom: var(--space-2); display: none;">Change Password</button>
                <button id="sign-out-btn" class="btn btn-outline btn-sm" onclick="signOut()" style="width: 100%; margin-bottom: var(--space-2);">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: var(--space-2);">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                    <polyline points="16 17 21 12 16 7"/>
                    <line x1="21" y1="12" x2="9" y2="12"/>
                  </svg>
                  Sign Out
                </button>
                <button class="btn btn-outline btn-sm" style="width: 100%; color: var(--error);" onclick="confirmResetData()">Reset All Data</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Progress & Analytics Page -->
      <div id="page-progress" class="page">
        <div class="container">
          <h1 style="margin-bottom: var(--space-2);">Your Progress</h1>
          <p style="color: var(--gray-600); margin-bottom: var(--space-8);">Track your recovery journey and health outcomes over time.</p>

          <div class="dashboard-grid">
            <div class="dashboard-main">
              <!-- Overall Progress Card -->
              <div class="card mb-6">
                <h2 style="margin-bottom: var(--space-4);">Recovery Overview</h2>
                <div class="progress-overview-grid">
                  <div class="progress-overview-stat">
                    <div class="progress-overview-ring">
                      <svg viewBox="0 0 100 100" class="progress-mini-ring">
                        <circle class="progress-mini-bg" cx="50" cy="50" r="40"/>
                        <circle class="progress-mini-fill" cx="50" cy="50" r="40" id="overall-progress-ring"/>
                      </svg>
                      <span class="progress-mini-value" id="overall-progress-value">15%</span>
                    </div>
                    <span class="progress-overview-label">Overall Recovery</span>
                  </div>
                  <div class="progress-overview-stat">
                    <div class="progress-overview-value" id="days-in-program">7</div>
                    <span class="progress-overview-label">Days in Program</span>
                  </div>
                  <div class="progress-overview-stat">
                    <div class="progress-overview-value" id="total-tasks-completed">24</div>
                    <span class="progress-overview-label">Tasks Completed</span>
                  </div>
                  <div class="progress-overview-stat">
                    <div class="progress-overview-value" id="current-streak">5</div>
                    <span class="progress-overview-label">Day Streak</span>
                  </div>
                </div>
              </div>

              <!-- Weekly Activity Chart -->
              <div class="card mb-6">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4);">
                  <h2>Weekly Activity</h2>
                  <select class="form-select" style="width: auto;" id="activity-chart-range" onchange="updateActivityChart()">
                    <option value="7">Last 7 days</option>
                    <option value="14">Last 14 days</option>
                    <option value="30">Last 30 days</option>
                  </select>
                </div>
                <div class="activity-chart-container">
                  <div class="activity-chart" id="activity-chart">
                    <!-- Chart bars will be generated by JS -->
                  </div>
                  <div class="activity-chart-legend">
                    <div class="legend-item">
                      <span class="legend-color" style="background: var(--primary-500);"></span>
                      <span>Fitness</span>
                    </div>
                    <div class="legend-item">
                      <span class="legend-color" style="background: var(--success);"></span>
                      <span>Nutrition</span>
                    </div>
                    <div class="legend-item">
                      <span class="legend-color" style="background: var(--info);"></span>
                      <span>Medication</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Task Completion Breakdown -->
              <div class="card mb-6">
                <h2 style="margin-bottom: var(--space-4);">Task Completion by Category</h2>
                <div class="task-breakdown-list" id="task-breakdown-list">
                  <div class="task-breakdown-item">
                    <div class="task-breakdown-info">
                      <span class="task-breakdown-name">Fitness</span>
                      <span class="task-breakdown-count">18/24 completed</span>
                    </div>
                    <div class="task-breakdown-bar">
                      <div class="task-breakdown-fill" style="width: 75%; background: var(--primary-500);"></div>
                    </div>
                  </div>
                  <div class="task-breakdown-item">
                    <div class="task-breakdown-info">
                      <span class="task-breakdown-name">Nutrition</span>
                      <span class="task-breakdown-count">21/21 completed</span>
                    </div>
                    <div class="task-breakdown-bar">
                      <div class="task-breakdown-fill" style="width: 100%; background: var(--success);"></div>
                    </div>
                  </div>
                  <div class="task-breakdown-item">
                    <div class="task-breakdown-info">
                      <span class="task-breakdown-name">Medication</span>
                      <span class="task-breakdown-count">12/14 completed</span>
                    </div>
                    <div class="task-breakdown-bar">
                      <div class="task-breakdown-fill" style="width: 86%; background: var(--info);"></div>
                    </div>
                  </div>
                  <div class="task-breakdown-item">
                    <div class="task-breakdown-info">
                      <span class="task-breakdown-name">Wellness</span>
                      <span class="task-breakdown-count">5/7 completed</span>
                    </div>
                    <div class="task-breakdown-bar">
                      <div class="task-breakdown-fill" style="width: 71%; background: var(--warning);"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Achievements -->
              <div class="card">
                <h2 style="margin-bottom: var(--space-4);">Achievements</h2>
                <div class="achievements-grid" id="achievements-grid">
                  <div class="achievement-item earned">
                    <div class="achievement-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                      </svg>
                    </div>
                    <span class="achievement-name">First Step</span>
                    <span class="achievement-desc">Complete your first task</span>
                  </div>
                  <div class="achievement-item earned">
                    <div class="achievement-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                      </svg>
                    </div>
                    <span class="achievement-name">On Track</span>
                    <span class="achievement-desc">3-day streak</span>
                  </div>
                  <div class="achievement-item earned">
                    <div class="achievement-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8h1a4 4 0 010 8h-1M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8zM6 1v3M10 1v3M14 1v3"/>
                      </svg>
                    </div>
                    <span class="achievement-name">Meal Master</span>
                    <span class="achievement-desc">Follow meal plan for a week</span>
                  </div>
                  <div class="achievement-item">
                    <div class="achievement-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="8" r="7"/>
                        <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
                      </svg>
                    </div>
                    <span class="achievement-name">Champion</span>
                    <span class="achievement-desc">7-day streak</span>
                  </div>
                  <div class="achievement-item">
                    <div class="achievement-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                        <line x1="4" y1="22" x2="4" y2="15"/>
                      </svg>
                    </div>
                    <span class="achievement-name">Halfway Hero</span>
                    <span class="achievement-desc">50% recovery progress</span>
                  </div>
                  <div class="achievement-item">
                    <div class="achievement-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                        <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
                        <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
                      </svg>
                    </div>
                    <span class="achievement-name">Fully Recovered</span>
                    <span class="achievement-desc">Complete your care plan</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="dashboard-sidebar">
              <!-- Health Metrics (if connected) -->
              <div class="card mb-6" id="progress-health-metrics">
                <h3 style="margin-bottom: var(--space-4);">Health Metrics</h3>
                <div id="progress-metrics-content">
                  <p style="color: var(--gray-500); font-size: 0.875rem; text-align: center; padding: var(--space-4);">
                    Connect a wearable device or health app to see your metrics here.
                  </p>
                  <button class="btn btn-outline btn-sm" onclick="navigateTo('profile')" style="width: 100%;">
                    Connect Device
                  </button>
                </div>
              </div>

              <!-- Recovery Timeline -->
              <div class="card mb-6">
                <h3 style="margin-bottom: var(--space-4);">Recovery Timeline</h3>
                <div class="recovery-timeline" id="recovery-timeline">
                  <div class="timeline-item completed">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <span class="timeline-date">Week 1</span>
                      <span class="timeline-title">Initial Assessment</span>
                    </div>
                  </div>
                  <div class="timeline-item current">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <span class="timeline-date">Week 2</span>
                      <span class="timeline-title">Active Recovery</span>
                    </div>
                  </div>
                  <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <span class="timeline-date">Week 3-4</span>
                      <span class="timeline-title">Strength Building</span>
                    </div>
                  </div>
                  <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <span class="timeline-date">Week 5-6</span>
                      <span class="timeline-title">Full Function</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Export Progress -->
              <div class="card">
                <h3 style="margin-bottom: var(--space-4);">Share Progress</h3>
                <p style="color: var(--gray-500); font-size: 0.875rem; margin-bottom: var(--space-4);">Share your progress with your care team.</p>
                <button class="btn btn-outline btn-sm" onclick="exportProgressReport()" style="width: 100%; margin-bottom: var(--space-2);">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                  </svg>
                  Export Report
                </button>
                <button class="btn btn-outline btn-sm" onclick="emailProgressReport()" style="width: 100%;">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                  </svg>
                  Email to Clinician
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- About Us Page -->
      <div id="page-about" class="page">
        <div class="container">
          <!-- Hero -->
          <div class="hero" style="margin: calc(var(--space-8) * -1) calc(var(--space-6) * -1) var(--space-8); padding: var(--space-16) var(--space-6);">
            <img src="assets/logo.png" alt="Caribou" style="width: 80px; height: 80px; margin: 0 auto var(--space-4);" class="logo-no-bg">
            <h1>About Caribou</h1>
            <p>Transforming diagnoses into personalized, holistic health plans for Canadians.</p>
          </div>

          <!-- Mission -->
          <div class="container-md">
            <div class="card mb-8">
              <h2 style="margin-bottom: var(--space-4);">Our Mission</h2>
              <p style="color: var(--gray-600); line-height: 1.8; font-size: 1.125rem;">
                Caribou is a personalized wellness platform addressing critical gaps in Canada's healthcare system by transforming diagnoses into tailored, holistic health plans. We bridge the disconnect between clinical consultations and daily health management, enabling patients to achieve better outcomes through accessible, achievable, and autonomous care.
              </p>
            </div>

            <!-- Why Holistic Health -->
            <div class="card mb-8">
              <h2 style="margin-bottom: var(--space-4);">Why Holistic Health Matters</h2>
              <p style="color: var(--gray-600); margin-bottom: var(--space-4);">
                Your health is more than just treating symptoms - it's about nurturing your whole self. At Caribou, we believe in a holistic approach because:
              </p>
              <div class="holistic-grid">
                <div class="holistic-item">
                  <div class="holistic-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2">
                      <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                  </div>
                  <h4>Mind-Body Connection</h4>
                  <p>Physical health affects mental well-being and vice versa. Stress can worsen chronic conditions, while exercise can improve mood and cognitive function.</p>
                </div>
                <div class="holistic-item">
                  <div class="holistic-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2">
                      <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                  </div>
                  <h4>Interconnected Systems</h4>
                  <p>Your body's systems work together. Nutrition affects energy levels, which impacts exercise capacity, which influences sleep quality, and so on.</p>
                </div>
                <div class="holistic-item">
                  <div class="holistic-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 6v6l4 2"/>
                    </svg>
                  </div>
                  <h4>Prevention Over Treatment</h4>
                  <p>By addressing lifestyle factors like nutrition, exercise, and stress management, we can often prevent complications before they occur.</p>
                </div>
                <div class="holistic-item">
                  <div class="holistic-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2">
                      <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                    </svg>
                  </div>
                  <h4>Sustainable Recovery</h4>
                  <p>True healing comes from addressing root causes, not just symptoms. A holistic approach leads to longer-lasting health improvements.</p>
                </div>
              </div>
              <p style="color: var(--gray-600); margin-top: var(--space-6);">
                That's why Caribou integrates nutrition planning, physical therapy, medication management, and wellness tracking into one cohesive care plan. When all aspects of your health work together, you achieve better outcomes.
              </p>
            </div>

            <!-- The Problem -->
            <div class="card mb-8">
              <h2 style="margin-bottom: var(--space-4);">The Problem We're Solving</h2>
              <p style="color: var(--gray-600); margin-bottom: var(--space-4);">
                In Canada's healthcare system, patients often leave clinical appointments with a diagnosis but without the comprehensive support needed to manage their conditions day-to-day. The gap between "what to do" and "how to do it" leaves many patients struggling to:
              </p>
              <ul style="margin-left: var(--space-4); color: var(--gray-600); margin-bottom: var(--space-4);">
                <li style="margin-bottom: var(--space-2);">Remember and follow complex medication schedules</li>
                <li style="margin-bottom: var(--space-2);">Maintain physical therapy routines between appointments</li>
                <li style="margin-bottom: var(--space-2);">Make appropriate nutrition choices for their conditions</li>
                <li style="margin-bottom: var(--space-2);">Track progress and communicate effectively with their care team</li>
              </ul>
              <p style="color: var(--gray-600);">
                Caribou fills this gap by providing personalized, daily care plans that support - never replace - the recommendations of healthcare providers.
              </p>
            </div>

            <!-- Safety Commitment -->
            <div class="safety-banner" style="margin-bottom: var(--space-8);">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
              </svg>
              <div>
                <p style="font-weight: 600; margin-bottom: var(--space-2);">Our Safety Commitment</p>
                <p>Caribou provides supportive care guidance based on your clinician's recommendations. We do not provide medical advice, diagnoses, or treatment recommendations. Always consult your healthcare provider for medical decisions.</p>
              </div>
            </div>

            <!-- Contact -->
            <div class="card text-center">
              <h2 style="margin-bottom: var(--space-4);">Get in Touch</h2>
              <p style="color: var(--gray-600); margin-bottom: var(--space-6);">Have questions or feedback? We'd love to hear from you.</p>
              <div class="flex justify-center gap-4">
                <a href="#" onclick="navigateTo('contact'); return false;" class="btn btn-primary">Contact Us</a>
                <a href="#" onclick="navigateTo('welcome'); return false;" class="btn btn-outline">Get Started</a>
              </div>
            </div>

            <!-- Learn More CTA -->
            <div class="card text-center" style="margin-top: var(--space-8); background: linear-gradient(135deg, var(--primary-50) 0%, var(--gray-50) 100%); border: 2px solid var(--primary-200);">
              <h2 style="margin-bottom: var(--space-4);">Want to Learn More?</h2>
              <p style="color: var(--gray-600); margin-bottom: var(--space-6);">Visit our website to discover how Caribou is transforming patient care in Canada.</p>
              <a href="https://caribou-health.github.io" target="_blank" rel="noopener noreferrer" class="btn btn-primary" style="gap: var(--space-2);">
                Learn More
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
                  <polyline points="15 3 21 3 21 9"/>
                  <line x1="10" y1="14" x2="21" y2="3"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Privacy Policy Page -->
      <div id="page-privacy" class="page">
        <div class="container">
          <div class="container-md">
            <h1 style="margin-bottom: var(--space-2);">Privacy Policy</h1>
            <p style="color: var(--gray-500); margin-bottom: var(--space-8);">Last updated: January 2025</p>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Introduction</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                Caribou Health ("Caribou," "we," "our," or "us") is committed to protecting your privacy and ensuring the security of your personal health information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our patient care platform.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Information We Collect</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">We collect information you provide directly to us, including:</p>
              <ul style="margin-left: var(--space-4); color: var(--gray-600); line-height: 1.7;">
                <li style="margin-bottom: var(--space-2);"><strong>Personal Information:</strong> Name, age, contact information</li>
                <li style="margin-bottom: var(--space-2);"><strong>Health Information:</strong> Diagnosis, medications, physical therapy exercises, dietary preferences</li>
                <li style="margin-bottom: var(--space-2);"><strong>Usage Data:</strong> How you interact with the platform, completed tasks, progress tracking</li>
                <li style="margin-bottom: var(--space-2);"><strong>Device Information:</strong> Wearable device data when you choose to connect health devices</li>
              </ul>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">How We Use Your Information</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">We use your information to:</p>
              <ul style="margin-left: var(--space-4); color: var(--gray-600); line-height: 1.7;">
                <li style="margin-bottom: var(--space-2);">Provide personalized care plans based on your clinician's recommendations</li>
                <li style="margin-bottom: var(--space-2);">Track your health progress and send helpful reminders</li>
                <li style="margin-bottom: var(--space-2);">Improve our platform and develop new features</li>
                <li style="margin-bottom: var(--space-2);">Communicate with you about your care plan</li>
                <li style="margin-bottom: var(--space-2);">Comply with legal obligations and protect our legal rights</li>
              </ul>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Data Storage and Security</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                Your data is stored locally on your device and is not transmitted to external servers without your explicit consent. We implement industry-standard security measures to protect your information. When you choose to sync data across devices or enable cloud backup, your data is encrypted in transit and at rest.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Your Rights and Choices</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">You have the right to:</p>
              <ul style="margin-left: var(--space-4); color: var(--gray-600); line-height: 1.7;">
                <li style="margin-bottom: var(--space-2);">Access, correct, or delete your personal information</li>
                <li style="margin-bottom: var(--space-2);">Export your health data in a portable format</li>
                <li style="margin-bottom: var(--space-2);">Opt out of non-essential data collection</li>
                <li style="margin-bottom: var(--space-2);">Disconnect wearable devices at any time</li>
                <li style="margin-bottom: var(--space-2);">Request a copy of your data</li>
              </ul>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Accessibility Commitment</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                Caribou is committed to ensuring digital accessibility for people of all abilities. We strive to meet WCAG 2.1 Level AA standards and continuously improve the user experience for everyone. Our platform includes:
              </p>
              <ul style="margin-left: var(--space-4); color: var(--gray-600); line-height: 1.7; margin-top: var(--space-4);">
                <li style="margin-bottom: var(--space-2);">Screen reader compatibility</li>
                <li style="margin-bottom: var(--space-2);">Keyboard navigation support</li>
                <li style="margin-bottom: var(--space-2);">High contrast and adjustable text options</li>
                <li style="margin-bottom: var(--space-2);">Clear, simple language throughout</li>
                <li style="margin-bottom: var(--space-2);">Alternative text for images and icons</li>
              </ul>
              <p style="color: var(--gray-600); line-height: 1.7; margin-top: var(--space-4);">
                If you encounter any accessibility barriers or have suggestions for improvement, please contact us at <a href="mailto:accessibility@caribou.health" style="color: var(--primary-600);">accessibility@caribou.health</a>.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Contact Us</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                If you have questions about this Privacy Policy or wish to exercise your privacy rights, please contact us at:
              </p>
              <p style="color: var(--gray-600); line-height: 1.7; margin-top: var(--space-4);">
                <strong>Caribou Health</strong><br>
                Email: <a href="mailto:privacy@caribou.health" style="color: var(--primary-600);">privacy@caribou.health</a>
              </p>
            </div>

            <div class="flex justify-center gap-4" style="margin-top: var(--space-8);">
              <a href="#" onclick="navigateTo('terms'); return false;" class="btn btn-outline">Terms of Service</a>
              <a href="#" onclick="navigateTo('contact'); return false;" class="btn btn-primary">Contact Us</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Terms of Service Page -->
      <div id="page-terms" class="page">
        <div class="container">
          <div class="container-md">
            <h1 style="margin-bottom: var(--space-2);">Terms of Service</h1>
            <p style="color: var(--gray-500); margin-bottom: var(--space-8);">Last updated: January 2025</p>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Agreement to Terms</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                By accessing or using Caribou ("the Platform"), you agree to be bound by these Terms of Service. If you disagree with any part of these terms, you may not access the Platform.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Medical Disclaimer</h2>
              <div class="safety-banner" style="margin-bottom: var(--space-4);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 24px; height: 24px; flex-shrink: 0;">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
                </svg>
                <p><strong>Important:</strong> Caribou is not a medical device and does not provide medical advice, diagnosis, or treatment.</p>
              </div>
              <p style="color: var(--gray-600); line-height: 1.7;">
                The Platform is designed to support your healthcare provider's recommendations and help you manage your daily health activities. It is not a substitute for professional medical advice, diagnosis, or treatment. Always seek the advice of your physician or other qualified health provider with any questions you may have regarding a medical condition. Never disregard professional medical advice or delay in seeking it because of something you have read or seen on this Platform.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Use of the Platform</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">You agree to use the Platform only for:</p>
              <ul style="margin-left: var(--space-4); color: var(--gray-600); line-height: 1.7;">
                <li style="margin-bottom: var(--space-2);">Managing your personal health care plan as directed by your healthcare provider</li>
                <li style="margin-bottom: var(--space-2);">Tracking your health progress and daily activities</li>
                <li style="margin-bottom: var(--space-2);">Receiving educational information about health and wellness</li>
                <li style="margin-bottom: var(--space-2);">Communicating with Caribou's AI assistant for supportive guidance</li>
              </ul>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">User Responsibilities</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">You are responsible for:</p>
              <ul style="margin-left: var(--space-4); color: var(--gray-600); line-height: 1.7;">
                <li style="margin-bottom: var(--space-2);">Providing accurate and complete information about your health</li>
                <li style="margin-bottom: var(--space-2);">Following your healthcare provider's actual recommendations</li>
                <li style="margin-bottom: var(--space-2);">Contacting your healthcare provider for any medical concerns</li>
                <li style="margin-bottom: var(--space-2);">Maintaining the security of your account and device</li>
                <li style="margin-bottom: var(--space-2);">Using the Platform in compliance with all applicable laws</li>
              </ul>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Intellectual Property</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                The Platform and its original content, features, and functionality are owned by Caribou Health and are protected by international copyright, trademark, and other intellectual property laws. You may not reproduce, distribute, or create derivative works from any part of the Platform without our express written consent.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Limitation of Liability</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                To the maximum extent permitted by law, Caribou Health shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including loss of profits, data, or health outcomes, resulting from your use of the Platform. The Platform is provided "as is" without warranties of any kind.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Changes to Terms</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                We reserve the right to modify these Terms at any time. We will notify users of any material changes by updating the "Last updated" date at the top of these Terms. Your continued use of the Platform after such changes constitutes acceptance of the new Terms.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Governing Law</h2>
              <p style="color: var(--gray-600); line-height: 1.7;">
                These Terms shall be governed by and construed in accordance with the laws of Canada, without regard to its conflict of law provisions.
              </p>
            </div>

            <div class="flex justify-center gap-4" style="margin-top: var(--space-8);">
              <a href="#" onclick="navigateTo('privacy'); return false;" class="btn btn-outline">Privacy Policy</a>
              <a href="#" onclick="navigateTo('contact'); return false;" class="btn btn-primary">Contact Us</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Us Page -->
      <div id="page-contact" class="page">
        <div class="container">
          <div class="container-md">
            <h1 style="margin-bottom: var(--space-2);">Contact Us</h1>
            <p style="color: var(--gray-600); margin-bottom: var(--space-8);">We'd love to hear from you. Get in touch with our team.</p>

            <div class="card mb-6 text-center">
              <div style="width: 80px; height: 80px; background: var(--primary-50); border-radius: 50%; margin: 0 auto var(--space-4); display: flex; align-items: center; justify-content: center;">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                  <polyline points="22,6 12,13 2,6"/>
                </svg>
              </div>
              <h2 style="margin-bottom: var(--space-4);">Get in Touch</h2>
              <p style="color: var(--gray-600); margin-bottom: var(--space-6); max-width: 400px; margin-left: auto; margin-right: auto;">
                Have questions, feedback, or need support? Fill out our contact form and we'll get back to you as soon as possible.
              </p>
              <a href="https://caribou-health.github.io#contact" target="_blank" rel="noopener noreferrer" class="btn btn-primary" style="gap: var(--space-2);">
                Open Contact Form
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
                  <polyline points="15 3 21 3 21 9"/>
                  <line x1="10" y1="14" x2="21" y2="3"/>
                </svg>
              </a>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Other Ways to Reach Us</h2>
              <div style="display: grid; gap: var(--space-4);">
                <div style="display: flex; align-items: flex-start; gap: var(--space-3); padding: var(--space-4); background: var(--gray-50); border-radius: var(--radius);">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                  </svg>
                  <div>
                    <h4 style="margin-bottom: var(--space-1);">General Inquiries</h4>
                    <a href="mailto:hello@caribou.health" style="color: var(--primary-600);">hello@caribou.health</a>
                  </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: var(--space-3); padding: var(--space-4); background: var(--gray-50); border-radius: var(--radius);">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                    <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"/>
                    <circle cx="12" cy="10" r="3"/>
                  </svg>
                  <div>
                    <h4 style="margin-bottom: var(--space-1);">Privacy & Data Requests</h4>
                    <a href="mailto:privacy@caribou.health" style="color: var(--primary-600);">privacy@caribou.health</a>
                  </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: var(--space-3); padding: var(--space-4); background: var(--gray-50); border-radius: var(--radius);">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="2" y1="12" x2="22" y2="12"/>
                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                  </svg>
                  <div>
                    <h4 style="margin-bottom: var(--space-1);">Accessibility Support</h4>
                    <a href="mailto:accessibility@caribou.health" style="color: var(--primary-600);">accessibility@caribou.health</a>
                  </div>
                </div>
              </div>
            </div>

            <div class="safety-banner">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 24px; height: 24px; flex-shrink: 0;">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
              </svg>
              <p><strong>Medical Emergency?</strong> If you are experiencing a medical emergency, please call 911 or your local emergency services immediately. Caribou is not equipped to handle medical emergencies.</p>
            </div>

            <div class="flex justify-center gap-4" style="margin-top: var(--space-8);">
              <a href="#" onclick="navigateTo('about'); return false;" class="btn btn-outline">About Caribou</a>
              <a href="#" onclick="navigateTo('privacy'); return false;" class="btn btn-outline">Privacy Policy</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Accessibility Page -->
      <div id="page-accessibility" class="page">
        <div class="container">
          <div class="container-md">
            <h1 style="margin-bottom: var(--space-2);">Accessibility</h1>
            <p style="color: var(--gray-600); margin-bottom: var(--space-8);">Our commitment to making Caribou accessible to everyone.</p>

            <div class="card mb-6" style="background: linear-gradient(135deg, var(--primary-50) 0%, var(--gray-50) 100%); border: 2px solid var(--primary-200);">
              <h2 style="margin-bottom: var(--space-4); display: flex; align-items: center; gap: var(--space-2);">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 8v8M8 12h8"/>
                </svg>
                Our Commitment
              </h2>
              <p style="color: var(--gray-600); line-height: 1.7; font-size: 1.05rem;">
                Caribou is committed to ensuring digital accessibility for people of all abilities. We believe that everyone deserves equal access to health management tools, regardless of their physical or cognitive abilities.
              </p>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Accessibility Standards</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">
                We strive to meet <strong>WCAG 2.1 Level AA</strong> standards and continuously improve the user experience for everyone. Our platform is designed and developed with accessibility in mind from the ground up.
              </p>
              <div style="display: grid; gap: var(--space-3);">
                <div style="display: flex; align-items: flex-start; gap: var(--space-3); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius);">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                    <path d="M20 6L9 17l-5-5"/>
                  </svg>
                  <span style="color: var(--gray-700);">Perceivable - Information is presented in ways that all users can perceive</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: var(--space-3); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius);">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                    <path d="M20 6L9 17l-5-5"/>
                  </svg>
                  <span style="color: var(--gray-700);">Operable - Interface components are operable by all users</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: var(--space-3); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius);">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                    <path d="M20 6L9 17l-5-5"/>
                  </svg>
                  <span style="color: var(--gray-700);">Understandable - Information and interface operation is understandable</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: var(--space-3); padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius);">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                    <path d="M20 6L9 17l-5-5"/>
                  </svg>
                  <span style="color: var(--gray-700);">Robust - Content is robust enough to work with assistive technologies</span>
                </div>
              </div>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Accessibility Features</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">Caribou includes the following accessibility features:</p>
              <ul style="margin-left: var(--space-4); color: var(--gray-600); line-height: 1.8;">
                <li style="margin-bottom: var(--space-2);"><strong>Screen Reader Compatibility:</strong> Full support for popular screen readers including VoiceOver, NVDA, and JAWS</li>
                <li style="margin-bottom: var(--space-2);"><strong>Keyboard Navigation:</strong> Complete keyboard accessibility for all interactive elements</li>
                <li style="margin-bottom: var(--space-2);"><strong>Focus Indicators:</strong> Visible focus states for all interactive elements</li>
                <li style="margin-bottom: var(--space-2);"><strong>Color Contrast:</strong> Text and UI elements meet WCAG AA contrast requirements</li>
                <li style="margin-bottom: var(--space-2);"><strong>Resizable Text:</strong> Text can be resized up to 200% without loss of functionality</li>
                <li style="margin-bottom: var(--space-2);"><strong>Alternative Text:</strong> Meaningful alt text for all images and icons</li>
                <li style="margin-bottom: var(--space-2);"><strong>Clear Language:</strong> Simple, clear language throughout the application</li>
                <li style="margin-bottom: var(--space-2);"><strong>Consistent Navigation:</strong> Predictable and consistent navigation patterns</li>
                <li style="margin-bottom: var(--space-2);"><strong>Error Identification:</strong> Clear error messages with suggestions for correction</li>
              </ul>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Assistive Technology Support</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">
                Caribou is designed to work with a wide range of assistive technologies:
              </p>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-4);">
                <div style="padding: var(--space-4); background: var(--gray-50); border-radius: var(--radius); text-align: center;">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="margin: 0 auto var(--space-2);">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                    <line x1="12" y1="19" x2="12" y2="23"/>
                    <line x1="8" y1="23" x2="16" y2="23"/>
                  </svg>
                  <h4 style="margin-bottom: var(--space-1);">Screen Readers</h4>
                  <p style="font-size: 0.85rem; color: var(--gray-500);">VoiceOver, NVDA, JAWS</p>
                </div>
                <div style="padding: var(--space-4); background: var(--gray-50); border-radius: var(--radius); text-align: center;">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="margin: 0 auto var(--space-2);">
                    <rect x="2" y="4" width="20" height="16" rx="2"/>
                    <path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M8 12h.01M12 12h.01M16 12h.01M6 16h12"/>
                  </svg>
                  <h4 style="margin-bottom: var(--space-1);">Keyboard Only</h4>
                  <p style="font-size: 0.85rem; color: var(--gray-500);">Full keyboard navigation</p>
                </div>
                <div style="padding: var(--space-4); background: var(--gray-50); border-radius: var(--radius); text-align: center;">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="margin: 0 auto var(--space-2);">
                    <circle cx="12" cy="12" r="10"/>
                    <circle cx="12" cy="12" r="4"/>
                    <line x1="21.17" y1="8" x2="12" y2="8"/>
                    <line x1="3.95" y1="6.06" x2="8.54" y2="14"/>
                    <line x1="10.88" y1="21.94" x2="15.46" y2="14"/>
                  </svg>
                  <h4 style="margin-bottom: var(--space-1);">Voice Control</h4>
                  <p style="font-size: 0.85rem; color: var(--gray-500);">Voice navigation support</p>
                </div>
                <div style="padding: var(--space-4); background: var(--gray-50); border-radius: var(--radius); text-align: center;">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--primary-500)" stroke-width="2" style="margin: 0 auto var(--space-2);">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                    <path d="M11 8v6M8 11h6"/>
                  </svg>
                  <h4 style="margin-bottom: var(--space-1);">Zoom & Magnification</h4>
                  <p style="font-size: 0.85rem; color: var(--gray-500);">Works at 200%+ zoom</p>
                </div>
              </div>
            </div>

            <div class="card mb-6">
              <h2 style="margin-bottom: var(--space-4);">Feedback & Support</h2>
              <p style="color: var(--gray-600); line-height: 1.7; margin-bottom: var(--space-4);">
                We are continuously working to improve the accessibility of Caribou. If you encounter any accessibility barriers or have suggestions for improvement, we want to hear from you.
              </p>
              <div style="padding: var(--space-4); background: var(--primary-50); border-radius: var(--radius); border-left: 4px solid var(--primary-500);">
                <h4 style="margin-bottom: var(--space-2);">Contact Our Accessibility Team</h4>
                <p style="color: var(--gray-600); margin-bottom: var(--space-2);">
                  Email: <a href="mailto:accessibility@caribou.health" style="color: var(--primary-600); font-weight: 500;">accessibility@caribou.health</a>
                </p>
                <p style="color: var(--gray-500); font-size: 0.9rem;">
                  We aim to respond to all accessibility feedback within 2 business days.
                </p>
              </div>
            </div>

            <div class="flex justify-center gap-4" style="margin-top: var(--space-8);">
              <a href="#" onclick="navigateTo('privacy'); return false;" class="btn btn-outline">Privacy Policy</a>
              <a href="#" onclick="navigateTo('contact'); return false;" class="btn btn-primary">Contact Us</a>
            </div>
          </div>
        </div>
      </div>

    </main>

    <!-- Footer -->
    <footer class="footer" id="main-footer" style="display: none;">
      <div class="footer-grid">
        <div class="footer-brand">
          <div class="footer-logo">
            <img src="assets/logo.png" alt="Caribou" style="width: 32px; height: 32px;">
            <h3>Caribou</h3>
          </div>
          <p style="margin-top: var(--space-2);">Your personalized wellness companion helping Canadians manage their holistic health journey.</p>
          <p style="margin-top: var(--space-4); font-size: 0.75rem;">
            This platform supports your clinician's recommendations and does not provide medical advice.
          </p>
        </div>

        <div class="footer-links">
          <h4>Platform</h4>
          <ul>
            <li><a href="#" onclick="navigateTo('home'); return false;">Dashboard</a></li>
            <li><a href="#" onclick="navigateTo('nutrition'); return false;">Nutrition</a></li>
            <li><a href="#" onclick="navigateTo('medication'); return false;">Medication</a></li>
            <li><a href="#" onclick="navigateTo('physicaltherapy'); return false;">Fitness</a></li>
          </ul>
        </div>

        <div class="footer-links">
          <h4>Company</h4>
          <ul>
            <li><a href="#" onclick="navigateTo('about'); return false;">About Us</a></li>
            <li><a href="#" onclick="navigateTo('privacy'); return false;">Privacy Policy</a></li>
            <li><a href="#" onclick="navigateTo('terms'); return false;">Terms of Service</a></li>
          </ul>
        </div>

        <div class="footer-links">
          <h4>Support</h4>
          <ul>
            <li><a href="https://caribou-health.github.io" target="_blank" rel="noopener noreferrer">Learn More</a></li>
            <li><a href="#" onclick="navigateTo('contact'); return false;">Contact Us</a></li>
            <li><a href="#" onclick="navigateTo('accessibility'); return false;">Accessibility</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p>Caribou Holistic Healthcare Inc. All rights reserved.</p>
        <p>Made with care in Canada | <a href="javascript:void(0)" onclick="showAdminLogin()" style="color: var(--gray-500); text-decoration: none; font-size: 0.75rem;">Admin</a></p>
      </div>
    </footer>

    <!-- AI Chatbot - Cura -->
    <div class="chatbot-container" id="chatbot-container" style="display: none;">
      <button class="chatbot-toggle" id="chatbot-toggle" onclick="toggleChatbot()" aria-label="Open Cura Care Assistant">
        <!-- Cura the Caribou icon -->
        <div class="chatbot-toggle-icon caribou-mascot-icon">
          <svg viewBox="0 0 459 391" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%;">
            <path d="M142.001 164.001V301.001C156.334 330.334 195.601 388.401 238.001 386.001C280.401 383.601 317.001 328.334 330.001 301.001H238.001M142.001 164.001C143.334 142.334 164.401 98.8009 238.001 98.0009C311.601 97.2009 330.001 141.668 330.001 164.001C363.144 164.001 387.097 153.442 404.001 137.339M142.001 164.001C109.301 164.001 85.3667 153.456 68.0844 137.339M238.001 301.001C228.668 292.668 210.601 274.401 213.001 268.001C216.001 260.001 263.001 257.001 261.001 268.001C259.401 276.801 245.001 293.668 238.001 301.001ZM436.001 4.00089C439.517 19.2356 440.972 39.2769 438.608 60.0009M28.0009 4.00089C25.4925 29.0852 27.5557 65.9675 41.2656 98.0009M41.2656 98.0009C60.1774 95.3342 98.6009 82.8009 101.001 54.0009M41.2656 98.0009C47.5399 112.661 56.2535 126.305 68.0844 137.339M404.001 137.339C420.001 136.559 452.601 140.801 455.001 164.001M404.001 137.339C425.32 117.028 435.425 87.896 438.608 60.0009M438.608 60.0009C412.739 57.0009 362.601 41.6009 369.001 4.00089M68.0844 137.339C50.7233 149.559 13.6009 169.201 4.00089 150.001M254.001 194.001C255.668 190.001 262.601 182.001 277.001 182.001C291.401 182.001 298.334 190.001 300.001 194.001" stroke="currentColor" stroke-width="10" stroke-linecap="round"/>
          </svg>
        </div>
        <span class="chatbot-badge" id="chatbot-badge" style="display: none;">1</span>
      </button>

      <div class="chatbot-window" id="chatbot-window">
        <div class="chatbot-header">
          <div class="chatbot-header-info">
            <!-- Cura the Caribou avatar -->
            <div class="chatbot-avatar caribou-avatar">
              <svg viewBox="0 0 459 391" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M142.001 164.001V301.001C156.334 330.334 195.601 388.401 238.001 386.001C280.401 383.601 317.001 328.334 330.001 301.001H238.001M142.001 164.001C143.334 142.334 164.401 98.8009 238.001 98.0009C311.601 97.2009 330.001 141.668 330.001 164.001C363.144 164.001 387.097 153.442 404.001 137.339M142.001 164.001C109.301 164.001 85.3667 153.456 68.0844 137.339M238.001 301.001C228.668 292.668 210.601 274.401 213.001 268.001C216.001 260.001 263.001 257.001 261.001 268.001C259.401 276.801 245.001 293.668 238.001 301.001ZM436.001 4.00089C439.517 19.2356 440.972 39.2769 438.608 60.0009M28.0009 4.00089C25.4925 29.0852 27.5557 65.9675 41.2656 98.0009M41.2656 98.0009C60.1774 95.3342 98.6009 82.8009 101.001 54.0009M41.2656 98.0009C47.5399 112.661 56.2535 126.305 68.0844 137.339M404.001 137.339C420.001 136.559 452.601 140.801 455.001 164.001M404.001 137.339C425.32 117.028 435.425 87.896 438.608 60.0009M438.608 60.0009C412.739 57.0009 362.601 41.6009 369.001 4.00089M68.0844 137.339C50.7233 149.559 13.6009 169.201 4.00089 150.001M254.001 194.001C255.668 190.001 262.601 182.001 277.001 182.001C291.401 182.001 298.334 190.001 300.001 194.001" stroke="var(--primary-500)" stroke-width="10" stroke-linecap="round"/>
              </svg>
            </div>
            <div>
              <h4>Cura</h4>
              <span class="chatbot-status">Your Caribou Care Guide</span>
            </div>
          </div>
          <button class="chatbot-close" onclick="toggleChatbot()" aria-label="Close chat">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
          </button>
        </div>

        <div class="chatbot-disclaimer">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 16v-4"/><circle cx="12" cy="8" r="1" fill="currentColor"/>
          </svg>
          <span>I provide supportive guidance only. Always follow your clinician's recommendations.</span>
        </div>

        <div class="chatbot-messages" id="chatbot-messages">
          <!-- Messages will be inserted here -->
        </div>

        <div class="chatbot-suggestions" id="chatbot-suggestions">
          <button class="chatbot-suggestion" onclick="sendSuggestion('Update my exercise preferences')">Update preferences</button>
          <button class="chatbot-suggestion" onclick="sendSuggestion('Tell me more about my fitness plan')">PT help</button>
          <button class="chatbot-suggestion" onclick="sendSuggestion('What should I know about my medication?')">Medication info</button>
        </div>

        <div class="chatbot-input-container">
          <input type="text" class="chatbot-input" id="chatbot-input" placeholder="Ask me anything about your care plan..." onkeypress="handleChatKeypress(event)">
          <button class="chatbot-send" onclick="sendChatMessage()" aria-label="Send message">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Loading Overlay with Cura the Caribou -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
      <div class="loading-content">
        <!-- Cura the Caribou - Official Mascot -->
        <div class="caribou-mascot-loader">
          <svg viewBox="0 0 459 391" fill="none" xmlns="http://www.w3.org/2000/svg" class="caribou-mascot-svg cura-loader">
            <path d="M142.001 164.001V301.001C156.334 330.334 195.601 388.401 238.001 386.001C280.401 383.601 317.001 328.334 330.001 301.001H238.001M142.001 164.001C143.334 142.334 164.401 98.8009 238.001 98.0009C311.601 97.2009 330.001 141.668 330.001 164.001C363.144 164.001 387.097 153.442 404.001 137.339M142.001 164.001C109.301 164.001 85.3667 153.456 68.0844 137.339M238.001 301.001C228.668 292.668 210.601 274.401 213.001 268.001C216.001 260.001 263.001 257.001 261.001 268.001C259.401 276.801 245.001 293.668 238.001 301.001ZM436.001 4.00089C439.517 19.2356 440.972 39.2769 438.608 60.0009M28.0009 4.00089C25.4925 29.0852 27.5557 65.9675 41.2656 98.0009M41.2656 98.0009C60.1774 95.3342 98.6009 82.8009 101.001 54.0009M41.2656 98.0009C47.5399 112.661 56.2535 126.305 68.0844 137.339M404.001 137.339C420.001 136.559 452.601 140.801 455.001 164.001M404.001 137.339C425.32 117.028 435.425 87.896 438.608 60.0009M438.608 60.0009C412.739 57.0009 362.601 41.6009 369.001 4.00089M68.0844 137.339C50.7233 149.559 13.6009 169.201 4.00089 150.001M254.001 194.001C255.668 190.001 262.601 182.001 277.001 182.001C291.401 182.001 298.334 190.001 300.001 194.001" stroke="var(--primary-500)" stroke-width="10" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="loading-spinner caribou-spinner"></div>
        <p id="loading-message" class="caribou-loading-message">Creating your personalized care plan...</p>
        <p class="caribou-loading-subtitle" id="loading-subtitle"></p>
      </div>
    </div>

    <!-- Intake Section Transition Overlay -->
    <div class="section-transition-overlay" id="section-transition-overlay" style="display: none;">
      <div class="section-transition-content">
        <div class="caribou-mascot-mini">
          <svg viewBox="0 0 459 391" fill="none" xmlns="http://www.w3.org/2000/svg" class="caribou-mini-svg cura-mini">
            <path d="M142.001 164.001V301.001C156.334 330.334 195.601 388.401 238.001 386.001C280.401 383.601 317.001 328.334 330.001 301.001H238.001M142.001 164.001C143.334 142.334 164.401 98.8009 238.001 98.0009C311.601 97.2009 330.001 141.668 330.001 164.001C363.144 164.001 387.097 153.442 404.001 137.339M142.001 164.001C109.301 164.001 85.3667 153.456 68.0844 137.339M238.001 301.001C228.668 292.668 210.601 274.401 213.001 268.001C216.001 260.001 263.001 257.001 261.001 268.001C259.401 276.801 245.001 293.668 238.001 301.001ZM436.001 4.00089C439.517 19.2356 440.972 39.2769 438.608 60.0009M28.0009 4.00089C25.4925 29.0852 27.5557 65.9675 41.2656 98.0009M41.2656 98.0009C60.1774 95.3342 98.6009 82.8009 101.001 54.0009M41.2656 98.0009C47.5399 112.661 56.2535 126.305 68.0844 137.339M404.001 137.339C420.001 136.559 452.601 140.801 455.001 164.001M404.001 137.339C425.32 117.028 435.425 87.896 438.608 60.0009M438.608 60.0009C412.739 57.0009 362.601 41.6009 369.001 4.00089M68.0844 137.339C50.7233 149.559 13.6009 169.201 4.00089 150.001M254.001 194.001C255.668 190.001 262.601 182.001 277.001 182.001C291.401 182.001 298.334 190.001 300.001 194.001" stroke="var(--primary-500)" stroke-width="10" stroke-linecap="round"/>
          </svg>
        </div>
        <p id="section-transition-message" class="section-transition-message">Great job!</p>
        <p id="section-transition-subtitle" class="section-transition-subtitle">Moving to the next section...</p>
        <div class="section-progress-dots">
          <span class="progress-dot completed" data-step="1"></span>
          <span class="progress-dot" data-step="2"></span>
          <span class="progress-dot" data-step="3"></span>
          <span class="progress-dot" data-step="4"></span>
          <span class="progress-dot" data-step="5"></span>
        </div>
      </div>
    </div>

    <!-- Onboarding Tutorial Overlay -->
    <div class="tutorial-overlay" id="tutorial-overlay" style="display: none;">
      <div class="tutorial-backdrop" onclick="skipTutorial()"></div>
      <div class="tutorial-spotlight" id="tutorial-spotlight"></div>
      <div class="tutorial-bubble" id="tutorial-bubble">
        <div class="tutorial-bubble-content">
          <div class="tutorial-mascot">
            <svg viewBox="0 0 459 391" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M142.001 164.001V301.001C156.334 330.334 195.601 388.401 238.001 386.001C280.401 383.601 317.001 328.334 330.001 301.001H238.001M142.001 164.001C143.334 142.334 164.401 98.8009 238.001 98.0009C311.601 97.2009 330.001 141.668 330.001 164.001C363.144 164.001 387.097 153.442 404.001 137.339M142.001 164.001C109.301 164.001 85.3667 153.456 68.0844 137.339M238.001 301.001C228.668 292.668 210.601 274.401 213.001 268.001C216.001 260.001 263.001 257.001 261.001 268.001C259.401 276.801 245.001 293.668 238.001 301.001ZM436.001 4.00089C439.517 19.2356 440.972 39.2769 438.608 60.0009M28.0009 4.00089C25.4925 29.0852 27.5557 65.9675 41.2656 98.0009M41.2656 98.0009C60.1774 95.3342 98.6009 82.8009 101.001 54.0009M41.2656 98.0009C47.5399 112.661 56.2535 126.305 68.0844 137.339M404.001 137.339C420.001 136.559 452.601 140.801 455.001 164.001M404.001 137.339C425.32 117.028 435.425 87.896 438.608 60.0009M438.608 60.0009C412.739 57.0009 362.601 41.6009 369.001 4.00089M68.0844 137.339C50.7233 149.559 13.6009 169.201 4.00089 150.001M254.001 194.001C255.668 190.001 262.601 182.001 277.001 182.001C291.401 182.001 298.334 190.001 300.001 194.001" stroke="var(--primary-500)" stroke-width="12" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="tutorial-text">
            <h3 id="tutorial-title">Welcome to Caribou!</h3>
            <p id="tutorial-message">Let me show you around your personalized care plan.</p>
          </div>
        </div>
        <div class="tutorial-footer">
          <div class="tutorial-progress">
            <span id="tutorial-step-current">1</span> of <span id="tutorial-step-total">5</span>
          </div>
          <div class="tutorial-actions">
            <button class="btn btn-ghost" onclick="skipTutorial()">Skip tour</button>
            <button class="btn btn-primary" onclick="nextTutorialStep()" id="tutorial-next-btn">Next</button>
          </div>
        </div>
        <div class="tutorial-arrow" id="tutorial-arrow"></div>
      </div>
    </div>
  </div>

  <!-- Mobile Bottom Navigation (hidden by default, shown when logged in) -->
  <nav class="mobile-bottom-nav" id="mobile-bottom-nav" style="display: none;">
    <button class="nav-item" data-page="pt" onclick="navigateTo('pt')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <!-- Dumbbell icon - simplified and clearer -->
        <rect x="2" y="10" width="4" height="4" rx="1"/>
        <rect x="18" y="10" width="4" height="4" rx="1"/>
        <rect x="4" y="8" width="2" height="8" rx="0.5"/>
        <rect x="18" y="8" width="2" height="8" rx="0.5"/>
        <line x1="6" y1="12" x2="18" y2="12"/>
      </svg>
      <span>Rehab</span>
    </button>
    <button class="nav-item" data-page="nutrition" onclick="navigateTo('nutrition')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <!-- Fork and Knife icon -->
        <path d="M3 2v7c0 1.1.9 2 2 2h1v11"/>
        <path d="M9 2v2c0 1 .5 3 2 3s2-2 2-3V2"/>
        <path d="M12 7v15"/>
        <path d="M18 2l-1 13h2l-1-13z"/>
        <path d="M19 15v7"/>
      </svg>
      <span>Nutrition</span>
    </button>
    <button class="nav-item nav-item-home" data-page="home" onclick="navigateTo('home')">
      <div class="nav-home-circle">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
      </div>
      <span>Home</span>
    </button>
    <button class="nav-item" data-page="medicine" onclick="navigateTo('medicine')">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <!-- Pill capsule icon -->
        <path d="M10.5 20.5L3 13c-1.4-1.4-1.4-3.6 0-5s3.6-1.4 5 0l7.5 7.5c1.4 1.4 1.4 3.6 0 5s-3.6 1.4-5 0z"/>
        <line x1="8.5" y1="8.5" x2="15.5" y2="15.5"/>
        <!-- Small cross for medical -->
        <line x1="19" y1="3" x2="19" y2="9"/>
        <line x1="16" y1="6" x2="22" y2="6"/>
      </svg>
      <span>Medicine</span>
    </button>
    <button class="nav-item" data-page="profile" onclick="handleProfileNavClick()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
      <span>Profile</span>
    </button>
  </nav>

  <!-- Profile Secondary Menu (shows when on profile page) -->
  <div class="profile-secondary-menu" id="profile-secondary-menu" style="display: none;">
    <div class="secondary-menu-header">
      <h3>More Pages</h3>
      <button class="close-secondary-menu" onclick="closeSecondaryMenu()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
    <div class="secondary-menu-items">
      <button class="secondary-menu-item" onclick="navigateTo('about'); closeSecondaryMenu();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 16v-4"/>
          <circle cx="12" cy="8" r="1" fill="currentColor"/>
        </svg>
        <span>About Caribou</span>
      </button>
      <button class="secondary-menu-item" onclick="navigateTo('tiers'); closeSecondaryMenu();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
        </svg>
        <span>Subscription Plans</span>
      </button>
      <button class="secondary-menu-item" onclick="navigateTo('wellness'); closeSecondaryMenu();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
        </svg>
        <span>Wellness</span>
      </button>
      <button class="secondary-menu-item" onclick="navigateTo('resources'); closeSecondaryMenu();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
        </svg>
        <span>Resources</span>
      </button>
      <button class="secondary-menu-item danger" onclick="resetApp(); closeSecondaryMenu();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="1 4 1 10 7 10"/>
          <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
        </svg>
        <span>Reset App</span>
      </button>
    </div>
  </div>

  <!-- Exercise Resources - Real Images & Video Tutorials -->
  <script src="assets/exercises/exercise-resources.js?v=20260218d"></script>
  <!-- Backend Configuration (Google Cloud Integration) -->
  <script src="js/backend-config.js?v=20260218d"></script>
  <script src="js/app.js?v=20260218d"></script>
</body>
</html>
